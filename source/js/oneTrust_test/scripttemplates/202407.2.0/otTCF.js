(function(){function Pe(){return typeof Reflect!="undefined"&&Reflect.get?Pe=Reflect.get.bind():Pe=function(v,E,S){var R=Pt(v,E);if(R){var U=Object.getOwnPropertyDescriptor(R,E);return U.get?U.get.call(arguments.length<3?v:S):U.value}},Pe.apply(this,arguments)}function Pt(d,v){for(;!Object.prototype.hasOwnProperty.call(d,v)&&(d=ge(d),d!==null););return d}function it(d,v){var E=Object.keys(d);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(d);v&&(S=S.filter(function(R){return Object.getOwnPropertyDescriptor(d,R).enumerable})),E.push.apply(E,S)}return E}function M(d){for(var v=1;v<arguments.length;v++){var E=arguments[v]!=null?arguments[v]:{};v%2?it(Object(E),!0).forEach(function(S){c(d,S,E[S])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(E)):it(Object(E)).forEach(function(S){Object.defineProperty(d,S,Object.getOwnPropertyDescriptor(E,S))})}return d}function ot(d,v,E,S,R,U,J){try{var H=d[U](J),N=H.value}catch(W){E(W);return}H.done?v(N):Promise.resolve(N).then(S,R)}function at(d){return function(){var v=this,E=arguments;return new Promise(function(S,R){var U=d.apply(v,E);function J(N){ot(U,S,R,J,H,"next",N)}function H(N){ot(U,S,R,J,H,"throw",N)}J(void 0)})}}function ve(){"use strict";ve=function(){return d};var d={},v=Object.prototype,E=v.hasOwnProperty,S=Object.defineProperty||function(g,f,m){g[f]=m.value},R=typeof Symbol=="function"?Symbol:{},U=R.iterator||"@@iterator",J=R.asyncIterator||"@@asyncIterator",H=R.toStringTag||"@@toStringTag";function N(g,f,m){return Object.defineProperty(g,f,{value:m,enumerable:!0,configurable:!0,writable:!0}),g[f]}try{N({},"")}catch(g){N=function(m,C,O){return m[C]=O}}function W(g,f,m,C){var O=f&&f.prototype instanceof $?f:$,I=Object.create(O.prototype),F=new be(C||[]);return S(I,"_invoke",{value:ee(g,m,F)}),I}function Se(g,f,m){try{return{type:"normal",arg:g.call(f,m)}}catch(C){return{type:"throw",arg:C}}}d.wrap=W;var p={};function $(){}function Y(){}function K(){}var X={};N(X,U,function(){return this});var te=Object.getPrototypeOf,me=te&&te(te(D([])));me&&me!==v&&E.call(me,U)&&(X=me);var ue=K.prototype=$.prototype=Object.create(X);function l(g){["next","throw","return"].forEach(function(f){N(g,f,function(m){return this._invoke(f,m)})})}function se(g,f){function m(O,I,F,B){var x=Se(g[O],g,I);if(x.type!=="throw"){var ie=x.arg,ne=ie.value;return ne&&Z(ne)=="object"&&E.call(ne,"__await")?f.resolve(ne.__await).then(function(oe){m("next",oe,F,B)},function(oe){m("throw",oe,F,B)}):f.resolve(ne).then(function(oe){ie.value=oe,F(ie)},function(oe){return m("throw",oe,F,B)})}B(x.arg)}var C;S(this,"_invoke",{value:function(I,F){function B(){return new f(function(x,ie){m(I,F,x,ie)})}return C=C?C.then(B,B):B()}})}function ee(g,f,m){var C="suspendedStart";return function(O,I){if(C==="executing")throw new Error("Generator is already running");if(C==="completed"){if(O==="throw")throw I;return de()}for(m.method=O,m.arg=I;;){var F=m.delegate;if(F){var B=ke(F,m);if(B){if(B===p)continue;return B}}if(m.method==="next")m.sent=m._sent=m.arg;else if(m.method==="throw"){if(C==="suspendedStart")throw C="completed",m.arg;m.dispatchException(m.arg)}else m.method==="return"&&m.abrupt("return",m.arg);C="executing";var x=Se(g,f,m);if(x.type==="normal"){if(C=m.done?"completed":"suspendedYield",x.arg===p)continue;return{value:x.arg,done:m.done}}x.type==="throw"&&(C="completed",m.method="throw",m.arg=x.arg)}}}function ke(g,f){var m=f.method,C=g.iterator[m];if(C===void 0)return f.delegate=null,m==="throw"&&g.iterator.return&&(f.method="return",f.arg=void 0,ke(g,f),f.method==="throw")||m!=="return"&&(f.method="throw",f.arg=new TypeError("The iterator does not provide a '"+m+"' method")),p;var O=Se(C,g.iterator,f.arg);if(O.type==="throw")return f.method="throw",f.arg=O.arg,f.delegate=null,p;var I=O.arg;return I?I.done?(f[g.resultName]=I.value,f.next=g.nextLoc,f.method!=="return"&&(f.method="next",f.arg=void 0),f.delegate=null,p):I:(f.method="throw",f.arg=new TypeError("iterator result is not an object"),f.delegate=null,p)}function ce(g){var f={tryLoc:g[0]};1 in g&&(f.catchLoc=g[1]),2 in g&&(f.finallyLoc=g[2],f.afterLoc=g[3]),this.tryEntries.push(f)}function ye(g){var f=g.completion||{};f.type="normal",delete f.arg,g.completion=f}function be(g){this.tryEntries=[{tryLoc:"root"}],g.forEach(ce,this),this.reset(!0)}function D(g){if(g){var f=g[U];if(f)return f.call(g);if(typeof g.next=="function")return g;if(!isNaN(g.length)){var m=-1,C=function O(){for(;++m<g.length;)if(E.call(g,m))return O.value=g[m],O.done=!1,O;return O.value=void 0,O.done=!0,O};return C.next=C}}return{next:de}}function de(){return{value:void 0,done:!0}}return Y.prototype=K,S(ue,"constructor",{value:K,configurable:!0}),S(K,"constructor",{value:Y,configurable:!0}),Y.displayName=N(K,H,"GeneratorFunction"),d.isGeneratorFunction=function(g){var f=typeof g=="function"&&g.constructor;return!!f&&(f===Y||(f.displayName||f.name)==="GeneratorFunction")},d.mark=function(g){return Object.setPrototypeOf?Object.setPrototypeOf(g,K):(g.__proto__=K,N(g,H,"GeneratorFunction")),g.prototype=Object.create(ue),g},d.awrap=function(g){return{__await:g}},l(se.prototype),N(se.prototype,J,function(){return this}),d.AsyncIterator=se,d.async=function(g,f,m,C,O){O===void 0&&(O=Promise);var I=new se(W(g,f,m,C),O);return d.isGeneratorFunction(f)?I:I.next().then(function(F){return F.done?F.value:I.next()})},l(ue),N(ue,H,"Generator"),N(ue,U,function(){return this}),N(ue,"toString",function(){return"[object Generator]"}),d.keys=function(g){var f=Object(g),m=[];for(var C in f)m.push(C);return m.reverse(),function O(){for(;m.length;){var I=m.pop();if(I in f)return O.value=I,O.done=!1,O}return O.done=!0,O}},d.values=D,be.prototype={constructor:be,reset:function(f){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ye),!f)for(var m in this)m.charAt(0)==="t"&&E.call(this,m)&&!isNaN(+m.slice(1))&&(this[m]=void 0)},stop:function(){this.done=!0;var f=this.tryEntries[0].completion;if(f.type==="throw")throw f.arg;return this.rval},dispatchException:function(f){if(this.done)throw f;var m=this;function C(ie,ne){return F.type="throw",F.arg=f,m.next=ie,ne&&(m.method="next",m.arg=void 0),!!ne}for(var O=this.tryEntries.length-1;O>=0;--O){var I=this.tryEntries[O],F=I.completion;if(I.tryLoc==="root")return C("end");if(I.tryLoc<=this.prev){var B=E.call(I,"catchLoc"),x=E.call(I,"finallyLoc");if(B&&x){if(this.prev<I.catchLoc)return C(I.catchLoc,!0);if(this.prev<I.finallyLoc)return C(I.finallyLoc)}else if(B){if(this.prev<I.catchLoc)return C(I.catchLoc,!0)}else{if(!x)throw new Error("try statement without catch or finally");if(this.prev<I.finallyLoc)return C(I.finallyLoc)}}}},abrupt:function(f,m){for(var C=this.tryEntries.length-1;C>=0;--C){var O=this.tryEntries[C];if(O.tryLoc<=this.prev&&E.call(O,"finallyLoc")&&this.prev<O.finallyLoc){var I=O;break}}I&&(f==="break"||f==="continue")&&I.tryLoc<=m&&m<=I.finallyLoc&&(I=null);var F=I?I.completion:{};return F.type=f,F.arg=m,I?(this.method="next",this.next=I.finallyLoc,p):this.complete(F)},complete:function(f,m){if(f.type==="throw")throw f.arg;return f.type==="break"||f.type==="continue"?this.next=f.arg:f.type==="return"?(this.rval=this.arg=f.arg,this.method="return",this.next="end"):f.type==="normal"&&m&&(this.next=m),p},finish:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var C=this.tryEntries[m];if(C.finallyLoc===f)return this.complete(C.completion,C.afterLoc),ye(C),p}},catch:function(f){for(var m=this.tryEntries.length-1;m>=0;--m){var C=this.tryEntries[m];if(C.tryLoc===f){var O=C.completion;if(O.type==="throw"){var I=O.arg;ye(C)}return I}}throw new Error("illegal catch attempt")},delegateYield:function(f,m,C){return this.delegate={iterator:D(f),resultName:m,nextLoc:C},this.method==="next"&&(this.arg=void 0),p}},d}function Te(d){return Dt(d)||Nt(d)||pt(d)||Rt()}function Rt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Nt(d){if(typeof Symbol!="undefined"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}function Dt(d){if(Array.isArray(d))return Me(d)}function c(d,v,E){return v=ct(v),v in d?Object.defineProperty(d,v,{value:E,enumerable:!0,configurable:!0,writable:!0}):d[v]=E,d}function ut(d,v){for(var E=0;E<v.length;E++){var S=v[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(d,ct(S.key),S)}}function k(d,v,E){return v&&ut(d.prototype,v),E&&ut(d,E),Object.defineProperty(d,"prototype",{writable:!1}),d}function ct(d){var v=Ft(d,"string");return Z(v)==="symbol"?v:String(v)}function Ft(d,v){if(Z(d)!=="object"||d===null)return d;var E=d[Symbol.toPrimitive];if(E!==void 0){var S=E.call(d,v||"default");if(Z(S)!=="object")return S;throw new TypeError("@@toPrimitive must return a primitive value.")}return(v==="string"?String:Number)(d)}function _(d,v){if(!(d instanceof v))throw new TypeError("Cannot call a class as a function")}function G(d,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(v&&v.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),v&&Ae(d,v)}function j(d){var v=dt();return function(){var S=ge(d),R;if(v){var U=ge(this).constructor;R=Reflect.construct(S,arguments,U)}else R=S.apply(this,arguments);return lt(this,R)}}function lt(d,v){if(v&&(Z(v)==="object"||typeof v=="function"))return v;if(v!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return y(d)}function y(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function we(d){var v=typeof Map=="function"?new Map:void 0;return we=function(S){if(S===null||!Ut(S))return S;if(typeof S!="function")throw new TypeError("Super expression must either be null or a function");if(typeof v!="undefined"){if(v.has(S))return v.get(S);v.set(S,R)}function R(){return Re(S,arguments,ge(this).constructor)}return R.prototype=Object.create(S.prototype,{constructor:{value:R,enumerable:!1,writable:!0,configurable:!0}}),Ae(R,S)},we(d)}function Re(d,v,E){return dt()?Re=Reflect.construct.bind():Re=function(R,U,J){var H=[null];H.push.apply(H,U);var N=Function.bind.apply(R,H),W=new N;return J&&Ae(W,J.prototype),W},Re.apply(null,arguments)}function dt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(d){return!1}}function Ut(d){return Function.toString.call(d).indexOf("[native code]")!==-1}function Ae(d,v){return Ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,R){return S.__proto__=R,S},Ae(d,v)}function ge(d){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},ge(d)}function Z(d){return Z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},Z(d)}function Ue(d,v){var E=typeof Symbol!="undefined"&&d[Symbol.iterator]||d["@@iterator"];if(!E){if(Array.isArray(d)||(E=pt(d))||v&&d&&typeof d.length=="number"){E&&(d=E);var S=0,R=function(){};return{s:R,n:function(){return S>=d.length?{done:!0}:{done:!1,value:d[S++]}},e:function(W){throw W},f:R}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var U=!0,J=!1,H;return{s:function(){E=E.call(d)},n:function(){var W=E.next();return U=W.done,W},e:function(W){J=!0,H=W},f:function(){try{!U&&E.return!=null&&E.return()}finally{if(J)throw H}}}}function pt(d,v){if(d){if(typeof d=="string")return Me(d,v);var E=Object.prototype.toString.call(d).slice(8,-1);if(E==="Object"&&d.constructor&&(E=d.constructor.name),E==="Map"||E==="Set")return Array.from(d);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return Me(d,v)}}function Me(d,v){(v==null||v>d.length)&&(v=d.length);for(var E=0,S=new Array(v);E<v;E++)S[E]=d[E];return S}(function(){var d,v,E=Object.defineProperty,S=Object.defineProperties,R=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable,N=function(a,t,n){return t in a?E(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n},W=function(a,t){for(var n in t||(t={}))J.call(t,n)&&N(a,n,t[n]);if(U){var e=Ue(U(t)),r;try{for(e.s();!(r=e.n()).done;){var n=r.value;H.call(t,n)&&N(a,n,t[n])}}catch(i){e.e(i)}finally{e.f()}}return a},Se=function(a,t){return S(a,R(t))},p=function(a,t,n){return N(a,Z(t)!="symbol"?t+"":t,n),n},$=function(s){G(t,s);var a=j(t);function t(n){var e;return _(this,t),e=a.call(this,n),e.name="DecodingError",e}return k(t)}(we(Error)),Y=function(s){G(t,s);var a=j(t);function t(n){var e;return _(this,t),e=a.call(this,n),e.name="EncodingError",e}return k(t)}(we(Error)),K=function(s){G(t,s);var a=j(t);function t(n){var e;return _(this,t),e=a.call(this,n),e.name="GVLError",e}return k(t)}(we(Error)),X=function(s){G(t,s);var a=j(t);function t(n,e){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return _(this,t),r=a.call(this,"invalid value ".concat(e," passed for ").concat(n," ").concat(i)),r.name="TCModelError",r}return k(t)}(we(Error)),te=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t){if(!/^[0-1]+$/.test(t))throw new Y("Invalid bitField");var n=t.length%this.LCM;t+=n?"0".repeat(this.LCM-n):"";for(var e="",r=0;r<t.length;r+=this.BASIS)e+=this.DICT[parseInt(t.substr(r,this.BASIS),2)];return e}},{key:"decode",value:function(t){if(!/^[A-Za-z0-9\-_]+$/.test(t))throw new $("Invalidly encoded Base64URL string");for(var n="",e=0;e<t.length;e++){var r=this.REVERSE_DICT.get(t[e]).toString(2);n+="0".repeat(this.BASIS-r.length)+r}return n}}]),s}();p(te,"DICT","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(te,"REVERSE_DICT",new Map([["A",0],["B",1],["C",2],["D",3],["E",4],["F",5],["G",6],["H",7],["I",8],["J",9],["K",10],["L",11],["M",12],["N",13],["O",14],["P",15],["Q",16],["R",17],["S",18],["T",19],["U",20],["V",21],["W",22],["X",23],["Y",24],["Z",25],["a",26],["b",27],["c",28],["d",29],["e",30],["f",31],["g",32],["h",33],["i",34],["j",35],["k",36],["l",37],["m",38],["n",39],["o",40],["p",41],["q",42],["r",43],["s",44],["t",45],["u",46],["v",47],["w",48],["x",49],["y",50],["z",51],["0",52],["1",53],["2",54],["3",55],["4",56],["5",57],["6",58],["7",59],["8",60],["9",61],["-",62],["_",63]])),p(te,"BASIS",6),p(te,"LCM",24);var me=function(){function s(){_(this,s)}return k(s,[{key:"has",value:function(t){return s.langSet.has(t)}},{key:"parseLanguage",value:function(t){t=t.toUpperCase();var n=t.split("-")[0];if(t.length>=2&&n.length==2){if(s.langSet.has(t))return t;if(s.langSet.has(n))return n;var e=n+"-"+n;if(s.langSet.has(e))return e;var r=Ue(s.langSet),i;try{for(r.s();!(i=r.n()).done;){var o=i.value;if(o.indexOf(t)!==-1||o.indexOf(n)!==-1)return o}}catch(u){r.e(u)}finally{r.f()}}throw new Error("unsupported language ".concat(t))}},{key:"forEach",value:function(t){s.langSet.forEach(t)}},{key:"size",get:function(){return s.langSet.size}}]),s}(),ue=me;p(ue,"langSet",new Set(["AR","BG","BS","CA","CS","CY","DA","DE","EL","EN","ES","ET","EU","FI","FR","GL","HE","HR","HU","ID","IT","JA","KO","LT","LV","MK","MS","MT","NL","NO","PL","PT-BR","PT-PT","RO","RU","SK","SL","SR-LATN","SR-CYRL","SV","TL","TR","UK","ZH"]));var l=k(function s(){_(this,s)});p(l,"cmpId","cmpId"),p(l,"cmpVersion","cmpVersion"),p(l,"consentLanguage","consentLanguage"),p(l,"consentScreen","consentScreen"),p(l,"created","created"),p(l,"supportOOB","supportOOB"),p(l,"isServiceSpecific","isServiceSpecific"),p(l,"lastUpdated","lastUpdated"),p(l,"numCustomPurposes","numCustomPurposes"),p(l,"policyVersion","policyVersion"),p(l,"publisherCountryCode","publisherCountryCode"),p(l,"publisherCustomConsents","publisherCustomConsents"),p(l,"publisherCustomLegitimateInterests","publisherCustomLegitimateInterests"),p(l,"publisherLegitimateInterests","publisherLegitimateInterests"),p(l,"publisherConsents","publisherConsents"),p(l,"publisherRestrictions","publisherRestrictions"),p(l,"purposeConsents","purposeConsents"),p(l,"purposeLegitimateInterests","purposeLegitimateInterests"),p(l,"purposeOneTreatment","purposeOneTreatment"),p(l,"specialFeatureOptins","specialFeatureOptins"),p(l,"useNonStandardTexts","useNonStandardTexts"),p(l,"vendorConsents","vendorConsents"),p(l,"vendorLegitimateInterests","vendorLegitimateInterests"),p(l,"vendorListVersion","vendorListVersion"),p(l,"vendorsAllowed","vendorsAllowed"),p(l,"vendorsDisclosed","vendorsDisclosed"),p(l,"version","version");var se=function(){function s(){_(this,s)}return k(s,[{key:"clone",value:function(){var t=this,n=new this.constructor;return Object.keys(this).forEach(function(e){var r=t.deepClone(t[e]);r!==void 0&&(n[e]=r)}),n}},{key:"deepClone",value:function(t){var n=Z(t);if(n==="number"||n==="string"||n==="boolean")return t;if(t!==null&&n==="object"){if(typeof t.clone=="function")return t.clone();if(t instanceof Date)return new Date(t.getTime());if(t[Symbol.iterator]!==void 0){var e=[],r=Ue(t),i;try{for(r.s();!(i=r.n()).done;){var o=i.value;e.push(this.deepClone(o))}}catch(L){r.e(L)}finally{r.f()}return t instanceof Array?e:new t.constructor(e)}else{var u={};for(var b in t)t.hasOwnProperty(b)&&(u[b]=this.deepClone(t[b]));return u}}}}]),s}(),ee;(function(s){s[s.NOT_ALLOWED=0]="NOT_ALLOWED",s[s.REQUIRE_CONSENT=1]="REQUIRE_CONSENT",s[s.REQUIRE_LI=2]="REQUIRE_LI"})(ee||(ee={}));var ke=function(s){G(t,s);var a=j(t);function t(n,e){var r;return _(this,t),r=a.call(this),c(y(r),"purposeId_",void 0),c(y(r),"restrictionType",void 0),n!==void 0&&(r.purposeId=n),e!==void 0&&(r.restrictionType=e),r}return k(t,[{key:"hash",get:function(){if(!this.isValid())throw new Error("cannot hash invalid PurposeRestriction");return"".concat(this.purposeId).concat(t.hashSeparator).concat(this.restrictionType)}},{key:"purposeId",get:function(){return this.purposeId_},set:function(e){this.purposeId_=e}},{key:"isValid",value:function(){return Number.isInteger(this.purposeId)&&this.purposeId>0&&(this.restrictionType===ee.NOT_ALLOWED||this.restrictionType===ee.REQUIRE_CONSENT||this.restrictionType===ee.REQUIRE_LI)}},{key:"isSameAs",value:function(e){return this.purposeId===e.purposeId&&this.restrictionType===e.restrictionType}}],[{key:"unHash",value:function(e){var r=e.split(this.hashSeparator),i=new t;if(r.length!==2)throw new X("hash",e);return i.purposeId=parseInt(r[0],10),i.restrictionType=parseInt(r[1],10),i}}]),t}(se),ce=ke;p(ce,"hashSeparator","-");var ye=function(s){G(t,s);var a=j(t);function t(){var n;_(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=a.call.apply(a,[this].concat(r)),c(y(n),"bitLength",0),c(y(n),"map",new Map),c(y(n),"gvl_",void 0),n}return k(t,[{key:"has",value:function(e){return this.map.has(e)}},{key:"isOkToHave",value:function(e,r,i){var o,u=!0;if((o=this.gvl)!==null&&o!==void 0&&o.vendors){var b=this.gvl.vendors[i];if(b)if(e===ee.NOT_ALLOWED)u=b.legIntPurposes.includes(r)||b.purposes.includes(r);else if(b.flexiblePurposes.length)switch(e){case ee.REQUIRE_CONSENT:u=b.flexiblePurposes.includes(r)&&b.legIntPurposes.includes(r);break;case ee.REQUIRE_LI:u=b.flexiblePurposes.includes(r)&&b.purposes.includes(r);break}else u=!1;else u=!1}return u}},{key:"add",value:function(e,r){if(this.isOkToHave(r.restrictionType,r.purposeId,e)){var i=r.hash;this.has(i)||(this.map.set(i,new Set),this.bitLength=0),this.map.get(i).add(e)}}},{key:"restrictPurposeToLegalBasis",value:function(e){var r=Array.from(this.gvl.vendorIds),i=e.hash,o=r[r.length-1],u=Te(Array(o).keys()).map(function(L){return L+1});if(!this.has(i))this.map.set(i,new Set(u)),this.bitLength=0;else for(var b=1;b<=o;b++)this.map.get(i).add(b)}},{key:"getVendors",value:function(e){var r=[];if(e){var i=e.hash;this.has(i)&&(r=Array.from(this.map.get(i)))}else{var o=new Set;this.map.forEach(function(u){u.forEach(function(b){o.add(b)})}),r=Array.from(o)}return r.sort(function(u,b){return u-b})}},{key:"getRestrictionType",value:function(e,r){var i;return this.getRestrictions(e).forEach(function(o){o.purposeId===r&&(i===void 0||i>o.restrictionType)&&(i=o.restrictionType)}),i}},{key:"vendorHasRestriction",value:function(e,r){for(var i=!1,o=this.getRestrictions(e),u=0;u<o.length&&!i;u++)i=r.isSameAs(o[u]);return i}},{key:"getMaxVendorId",value:function(){var e=0;return this.map.forEach(function(r){e=Math.max(Array.from(r)[r.size-1],e)}),e}},{key:"getRestrictions",value:function(e){var r=[];return this.map.forEach(function(i,o){e?i.has(e)&&r.push(ce.unHash(o)):r.push(ce.unHash(o))}),r}},{key:"getPurposes",value:function(){var e=new Set;return this.map.forEach(function(r,i){e.add(ce.unHash(i).purposeId)}),Array.from(e)}},{key:"remove",value:function(e,r){var i=r.hash,o=this.map.get(i);o&&(o.delete(e),o.size==0&&(this.map.delete(i),this.bitLength=0))}},{key:"gvl",get:function(){return this.gvl_},set:function(e){var r=this;this.gvl_||(this.gvl_=e,this.map.forEach(function(i,o){var u=ce.unHash(o);Array.from(i).forEach(function(b){r.isOkToHave(u.restrictionType,u.purposeId,b)||i.delete(b)})}))}},{key:"isEmpty",value:function(){return this.map.size===0}},{key:"numRestrictions",get:function(){return this.map.size}}]),t}(se),be;(function(s){s.COOKIE="cookie",s.WEB="web",s.APP="app"})(be||(be={}));var D;(function(s){s.CORE="core",s.VENDORS_DISCLOSED="vendorsDisclosed",s.VENDORS_ALLOWED="vendorsAllowed",s.PUBLISHER_TC="publisherTC"})(D||(D={}));var de=k(function s(){_(this,s)});p(de,"ID_TO_KEY",[D.CORE,D.VENDORS_DISCLOSED,D.VENDORS_ALLOWED,D.PUBLISHER_TC]),p(de,"KEY_TO_ID",(v={},c(v,D.CORE,0),c(v,D.VENDORS_DISCLOSED,1),c(v,D.VENDORS_ALLOWED,2),c(v,D.PUBLISHER_TC,3),v));var g=(d=Symbol.iterator,function(s){G(t,s);var a=j(t);function t(){var n;_(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=a.call.apply(a,[this].concat(r)),c(y(n),"bitLength",0),c(y(n),"maxId_",0),c(y(n),"set_",new Set),n}return k(t,[{key:d,value:ve().mark(function n(){var e;return ve().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:e=1;case 1:if(!(e<=this.maxId)){i.next=7;break}return i.next=4,[e,this.has(e)];case 4:e++,i.next=1;break;case 7:case"end":return i.stop()}},n,this)})},{key:"values",value:function(){return this.set_.values()}},{key:"maxId",get:function(){return this.maxId_}},{key:"has",value:function(e){return this.set_.has(e)}},{key:"unset",value:function(e){var r=this;Array.isArray(e)?e.forEach(function(i){return r.unset(i)}):Z(e)=="object"?this.unset(Object.keys(e).map(function(i){return Number(i)})):(this.set_.delete(Number(e)),this.bitLength=0,e===this.maxId&&(this.maxId_=0,this.set_.forEach(function(i){r.maxId_=Math.max(r.maxId,i)})))}},{key:"isIntMap",value:function(e){var r=this,i=Z(e)=="object";return i=i&&Object.keys(e).every(function(o){var u=Number.isInteger(parseInt(o,10));return u=u&&r.isValidNumber(e[o].id),u=u&&e[o].name!==void 0,u}),i}},{key:"isValidNumber",value:function(e){return parseInt(e,10)>0}},{key:"isSet",value:function(e){var r=!1;return e instanceof Set&&(r=Array.from(e).every(this.isValidNumber)),r}},{key:"set",value:function(e){var r=this;if(Array.isArray(e))e.forEach(function(i){return r.set(i)});else if(this.isSet(e))this.set(Array.from(e));else if(this.isIntMap(e))this.set(Object.keys(e).map(function(i){return Number(i)}));else if(this.isValidNumber(e))this.set_.add(e),this.maxId_=Math.max(this.maxId,e),this.bitLength=0;else throw new X("set()",e,"must be positive integer array, positive integer, Set<number>, or IntMap")}},{key:"empty",value:function(){this.set_=new Set}},{key:"forEach",value:function(e){for(var r=1;r<=this.maxId;r++)e(this.has(r),r)}},{key:"size",get:function(){return this.set_.size}},{key:"setAll",value:function(e){this.set(e)}}]),t}(se)),f,m,C,O,I,F,B,x,ie,ne,oe,Ge,je,He,Be,xe,Qe,We,h=k(function s(){_(this,s)});f=l.cmpId,m=l.cmpVersion,C=l.consentLanguage,O=l.consentScreen,I=l.created,F=l.isServiceSpecific,B=l.lastUpdated,x=l.policyVersion,ie=l.publisherCountryCode,ne=l.publisherLegitimateInterests,oe=l.publisherConsents,Ge=l.purposeConsents,je=l.purposeLegitimateInterests,He=l.purposeOneTreatment,Be=l.specialFeatureOptins,xe=l.useNonStandardTexts,Qe=l.vendorListVersion,We=l.version,p(h,f,12),p(h,m,12),p(h,C,12),p(h,O,6),p(h,I,36),p(h,F,1),p(h,B,36),p(h,x,6),p(h,ie,12),p(h,ne,24),p(h,oe,24),p(h,Ge,24),p(h,je,24),p(h,He,1),p(h,Be,12),p(h,xe,1),p(h,Qe,12),p(h,We,6),p(h,"anyBoolean",1),p(h,"encodingType",1),p(h,"maxId",16),p(h,"numCustomPurposes",6),p(h,"numEntries",12),p(h,"numRestrictions",12),p(h,"purposeId",6),p(h,"restrictionType",2),p(h,"segmentType",3),p(h,"singleOrRange",1),p(h,"vendorId",16);var ae=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t){return String(Number(t))}},{key:"decode",value:function(t){return t==="1"}}]),s}(),T=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t,n){var e;if(typeof t=="string"&&(t=parseInt(t,10)),e=t.toString(2),e.length>n||t<0)throw new Y("".concat(t," too large to encode into ").concat(n));return e.length<n&&(e="0".repeat(n-e.length)+e),e}},{key:"decode",value:function(t,n){if(n!==t.length)throw new $("invalid bit length");return parseInt(t,2)}}]),s}(),ze=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t,n){return T.encode(Math.round(t.getTime()/100),n)}},{key:"decode",value:function(t,n){if(n!==t.length)throw new $("invalid bit length");var e=new Date;return e.setTime(T.decode(t,n)*100),e}}]),s}(),le=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t,n){for(var e="",r=1;r<=n;r++)e+=ae.encode(t.has(r));return e}},{key:"decode",value:function(t,n){if(t.length!==n)throw new $("bitfield encoding length mismatch");for(var e=new g,r=1;r<=n;r++)ae.decode(t[r-1])&&e.set(r);return e.bitLength=t.length,e}}]),s}(),Je=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t,n){t=t.toUpperCase();var e=65,r=t.charCodeAt(0)-e,i=t.charCodeAt(1)-e;if(r<0||r>25||i<0||i>25)throw new Y("invalid language code: ".concat(t));if(n%2===1)throw new Y("numBits must be even, ".concat(n," is not valid"));n=n/2;var o=T.encode(r,n),u=T.encode(i,n);return o+u}},{key:"decode",value:function(t,n){var e;if(n===t.length&&!(t.length%2)){var r=t.length/2,i=T.decode(t.slice(0,r),r)+65,o=T.decode(t.slice(r),r)+65;e=String.fromCharCode(i)+String.fromCharCode(o)}else throw new $("invalid bit length for language");return e}}]),s}(),ft=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t){var n=T.encode(t.numRestrictions,h.numRestrictions);if(!t.isEmpty()){var e=function(i,o){for(var u=i+1;u<=o;u++)if(t.gvl.vendorIds.has(u))return u;return i};t.getRestrictions().forEach(function(r){n+=T.encode(r.purposeId,h.purposeId),n+=T.encode(r.restrictionType,h.restrictionType);for(var i=t.getVendors(r),o=i.length,u=0,b=0,L="",V=0;V<o;V++){var P=i[V];if(b===0&&(u++,b=P),V===o-1||i[V+1]>e(P,i[o-1])){var A=P!==b;L+=ae.encode(A),L+=T.encode(b,h.vendorId),A&&(L+=T.encode(P,h.vendorId)),b=0}}n+=T.encode(u,h.numEntries),n+=L})}return n}},{key:"decode",value:function(t){var n=0,e=new ye,r=T.decode(t.substr(n,h.numRestrictions),h.numRestrictions);n+=h.numRestrictions;for(var i=0;i<r;i++){var o=T.decode(t.substr(n,h.purposeId),h.purposeId);n+=h.purposeId;var u=T.decode(t.substr(n,h.restrictionType),h.restrictionType);n+=h.restrictionType;var b=new ce(o,u),L=T.decode(t.substr(n,h.numEntries),h.numEntries);n+=h.numEntries;for(var V=0;V<L;V++){var P=ae.decode(t.substr(n,h.anyBoolean));n+=h.anyBoolean;var A=T.decode(t.substr(n,h.vendorId),h.vendorId);if(n+=h.vendorId,P){var q=T.decode(t.substr(n,h.vendorId),h.vendorId);if(n+=h.vendorId,q<A)throw new $("Invalid RangeEntry: endVendorId ".concat(q," is less than ").concat(A));for(var Ee=A;Ee<=q;Ee++)e.add(Ee,b)}else e.add(A,b)}}return e.bitLength=n,e}}]),s}(),Ce;(function(s){s[s.FIELD=0]="FIELD",s[s.RANGE=1]="RANGE"})(Ce||(Ce={}));var Ie=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t){var n=[],e=[],r=T.encode(t.maxId,h.maxId),i="",o,u=h.maxId+h.encodingType,b=u+t.maxId,L=h.vendorId*2+h.singleOrRange+h.numEntries,V=u+h.numEntries;return t.forEach(function(P,A){i+=ae.encode(P),o=t.maxId>L&&V<b,o&&P&&(t.has(A+1)?e.length===0&&(e.push(A),V+=h.singleOrRange,V+=h.vendorId):(e.push(A),V+=h.vendorId,n.push(e),e=[]))}),o?(r+=String(Ce.RANGE),r+=this.buildRangeEncoding(n)):(r+=String(Ce.FIELD),r+=i),r}},{key:"decode",value:function(t,n){var e,r=0,i=T.decode(t.substr(r,h.maxId),h.maxId);r+=h.maxId;var o=T.decode(t.charAt(r),h.encodingType);if(r+=h.encodingType,o===Ce.RANGE){if(e=new g,n===1){if(t.substr(r,1)==="1")throw new $("Unable to decode default consent=1");r++}var u=T.decode(t.substr(r,h.numEntries),h.numEntries);r+=h.numEntries;for(var b=0;b<u;b++){var L=ae.decode(t.charAt(r));r+=h.singleOrRange;var V=T.decode(t.substr(r,h.vendorId),h.vendorId);if(r+=h.vendorId,L){var P=T.decode(t.substr(r,h.vendorId),h.vendorId);r+=h.vendorId;for(var A=V;A<=P;A++)e.set(A)}else e.set(V)}}else{var q=t.substr(r,i);r+=i,e=le.decode(q,i)}return e.bitLength=r,e}},{key:"buildRangeEncoding",value:function(t){var n=t.length,e=T.encode(n,h.numEntries);return t.forEach(function(r){var i=r.length===1;e+=ae.encode(!i),e+=T.encode(r[0],h.vendorId),i||(e+=T.encode(r[1],h.vendorId))}),e}}]),s}();function Ye(){var s;return s={},c(s,l.version,T),c(s,l.created,ze),c(s,l.lastUpdated,ze),c(s,l.cmpId,T),c(s,l.cmpVersion,T),c(s,l.consentScreen,T),c(s,l.consentLanguage,Je),c(s,l.vendorListVersion,T),c(s,l.policyVersion,T),c(s,l.isServiceSpecific,ae),c(s,l.useNonStandardTexts,ae),c(s,l.specialFeatureOptins,le),c(s,l.purposeConsents,le),c(s,l.purposeLegitimateInterests,le),c(s,l.purposeOneTreatment,ae),c(s,l.publisherCountryCode,Je),c(s,l.vendorConsents,Ie),c(s,l.vendorLegitimateInterests,Ie),c(s,l.publisherRestrictions,ft),c(s,"segmentType",T),c(s,l.vendorsDisclosed,Ie),c(s,l.vendorsAllowed,Ie),c(s,l.publisherConsents,le),c(s,l.publisherLegitimateInterests,le),c(s,l.numCustomPurposes,T),c(s,l.publisherCustomConsents,le),c(s,l.publisherCustomLegitimateInterests,le),s}var ht=k(function s(){var a;_(this,s),c(this,1,c({},D.CORE,[l.version,l.created,l.lastUpdated,l.cmpId,l.cmpVersion,l.consentScreen,l.consentLanguage,l.vendorListVersion,l.purposeConsents,l.vendorConsents])),c(this,2,(a={},c(a,D.CORE,[l.version,l.created,l.lastUpdated,l.cmpId,l.cmpVersion,l.consentScreen,l.consentLanguage,l.vendorListVersion,l.policyVersion,l.isServiceSpecific,l.useNonStandardTexts,l.specialFeatureOptins,l.purposeConsents,l.purposeLegitimateInterests,l.purposeOneTreatment,l.publisherCountryCode,l.vendorConsents,l.vendorLegitimateInterests,l.publisherRestrictions]),c(a,D.PUBLISHER_TC,[l.publisherConsents,l.publisherLegitimateInterests,l.numCustomPurposes,l.publisherCustomConsents,l.publisherCustomLegitimateInterests]),c(a,D.VENDORS_ALLOWED,[l.vendorsAllowed]),c(a,D.VENDORS_DISCLOSED,[l.vendorsDisclosed]),a))}),vt=k(function s(a,t){if(_(this,s),c(this,1,[D.CORE]),c(this,2,[D.CORE]),a.version===2)if(a.isServiceSpecific)this[2].push(D.PUBLISHER_TC);else{var n=!!(t&&t.isForVendors);(!n||a[l.supportOOB]===!0)&&this[2].push(D.VENDORS_DISCLOSED),n&&(a[l.supportOOB]&&a[l.vendorsAllowed].size>0&&this[2].push(D.VENDORS_ALLOWED),this[2].push(D.PUBLISHER_TC))}}),Ne=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t,n){var e=this,r;try{r=this.fieldSequence[String(t.version)][n]}catch(u){throw new Y("Unable to encode version: ".concat(t.version,", segment: ").concat(n))}var i="";n!==D.CORE&&(i=T.encode(de.KEY_TO_ID[n],h.segmentType));var o=Ye();return r.forEach(function(u){var b=t[u],L=o[u],V=h[u];V===void 0&&e.isPublisherCustom(u)&&(V=Number(t[l.numCustomPurposes]));try{i+=L.encode(b,V)}catch(P){throw new Y("Error encoding ".concat(n,"->").concat(u,": ").concat(P.message))}}),te.encode(i)}},{key:"decode",value:function(t,n,e){var r=this,i=te.decode(t),o=0;e===D.CORE&&(n.version=T.decode(i.substr(o,h[l.version]),h[l.version])),e!==D.CORE&&(o+=h.segmentType);var u=this.fieldSequence[String(n.version)][e],b=Ye();return u.forEach(function(L){var V=b[L],P=h[L];if(P===void 0&&r.isPublisherCustom(L)&&(P=Number(n[l.numCustomPurposes])),P!==0){var A=i.substr(o,P);if(V===Ie?n[L]=V.decode(A,n.version):n[L]=V.decode(A,P),Number.isInteger(P))o+=P;else if(Number.isInteger(n[L].bitLength))o+=n[L].bitLength;else throw new $(L)}}),n}},{key:"isPublisherCustom",value:function(t){return t.indexOf("publisherCustom")===0}}]),s}();p(Ne,"fieldSequence",new ht);var Ke=function(){function s(){_(this,s)}return k(s,null,[{key:"process",value:function(t,n){var e=t.gvl;if(!e)throw new Y("Unable to encode TCModel without a GVL");if(!e.isReady)throw new Y("Unable to encode TCModel tcModel.gvl.readyPromise is not resolved");t=t.clone(),t.consentLanguage=e.language.slice(0,2).toUpperCase(),(n==null?void 0:n.version)>0&&(n==null?void 0:n.version)<=this.processor.length?t.version=n.version:t.version=this.processor.length;var r=t.version-1;if(!this.processor[r])throw new Y("Invalid version: ".concat(t.version));return this.processor[r](t,e)}}]),s}();p(Ke,"processor",[function(s){return s},function(s,a){s.publisherRestrictions.gvl=a,s.purposeLegitimateInterests.unset([1,3,4,5,6]);var t=new Map;return t.set("legIntPurposes",s.vendorLegitimateInterests),t.set("purposes",s.vendorConsents),t.forEach(function(n,e){n.forEach(function(r,i){if(r){var o=a.vendors[i];if(!o||o.deletedDate)n.unset(i);else if(o[e].length===0&&!(e==="legIntPurposes"&&o.purposes.length===0&&o.legIntPurposes.length===0&&o.specialPurposes.length>0))if(s.isServiceSpecific)if(o.flexiblePurposes.length===0)n.unset(i);else{for(var u=s.publisherRestrictions.getRestrictions(i),b=!1,L=0,V=u.length;L<V&&!b;L++)b=u[L].restrictionType===ee.REQUIRE_CONSENT&&e==="purposes"||u[L].restrictionType===ee.REQUIRE_LI&&e==="legIntPurposes";b||n.unset(i)}else n.unset(i)}})}),s.vendorsDisclosed.set(a.vendors),s}]);var gt=function(){function s(){_(this,s)}return k(s,null,[{key:"absCall",value:function(t,n,e,r){return new Promise(function(i,o){var u=new XMLHttpRequest,b=function(){if(u.readyState==XMLHttpRequest.DONE)if(u.status>=200&&u.status<300){var q=u.response;if(typeof q=="string")try{q=JSON.parse(q)}catch(Ee){}i(q)}else o(new Error("HTTP Status: ".concat(u.status," response type: ").concat(u.responseType)))},L=function(){o(new Error("error"))},V=function(){o(new Error("aborted"))},P=function(){o(new Error("Timeout "+r+"ms "+t))};u.withCredentials=e,u.addEventListener("load",b),u.addEventListener("error",L),u.addEventListener("abort",V),n===null?u.open("GET",t,!0):u.open("POST",t,!0),u.responseType="json",u.timeout=r,u.ontimeout=P,u.send(n)})}},{key:"post",value:function(t,n){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;return this.absCall(t,JSON.stringify(n),e,r)}},{key:"fetch",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.absCall(t,null,n,e)}}]),s}(),mt=function(s){G(t,s);var a=j(t);function t(n,e){var r;_(this,t),r=a.call(this),c(y(r),"readyPromise",void 0),c(y(r),"gvlSpecificationVersion",void 0),c(y(r),"vendorListVersion",void 0),c(y(r),"tcfPolicyVersion",void 0),c(y(r),"lastUpdated",void 0),c(y(r),"purposes",void 0),c(y(r),"specialPurposes",void 0),c(y(r),"features",void 0),c(y(r),"specialFeatures",void 0),c(y(r),"isReady_",!1),c(y(r),"vendors_",void 0),c(y(r),"vendorIds",void 0),c(y(r),"fullVendorList",void 0),c(y(r),"byPurposeVendorMap",void 0),c(y(r),"bySpecialPurposeVendorMap",void 0),c(y(r),"byFeatureVendorMap",void 0),c(y(r),"bySpecialFeatureVendorMap",void 0),c(y(r),"stacks",void 0),c(y(r),"dataCategories",void 0),c(y(r),"lang_",void 0),c(y(r),"cacheLang_",void 0),c(y(r),"isLatest",!1);var i=t.baseUrl,o=e==null?void 0:e.language;if(o)try{o=t.consentLanguages.parseLanguage(o)}catch(b){throw new K("Error during parsing the language: "+b.message)}if(r.lang_=o||t.DEFAULT_LANGUAGE,r.cacheLang_=o||t.DEFAULT_LANGUAGE,r.isVendorList(n))r.populate(n),r.readyPromise=Promise.resolve();else{if(!i)throw new K("must specify GVL.baseUrl before loading GVL json");if(n>0){var u=n;t.CACHE.has(u)?(r.populate(t.CACHE.get(u)),r.readyPromise=Promise.resolve()):(i+=t.versionedFilename.replace("[VERSION]",String(u)),r.readyPromise=r.fetchJson(i))}else t.CACHE.has(t.LATEST_CACHE_KEY)?(r.populate(t.CACHE.get(t.LATEST_CACHE_KEY)),r.readyPromise=Promise.resolve()):(r.isLatest=!0,r.readyPromise=r.fetchJson(i+t.latestFilename))}return r}return k(t,[{key:"cacheLanguage",value:function(){t.LANGUAGE_CACHE.has(this.cacheLang_)||t.LANGUAGE_CACHE.set(this.cacheLang_,{purposes:this.purposes,specialPurposes:this.specialPurposes,features:this.features,specialFeatures:this.specialFeatures,stacks:this.stacks,dataCategories:this.dataCategories})}},{key:"fetchJson",value:function(){var n=at(ve().mark(function r(i){return ve().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.prev=0,u.t0=this,u.next=4,gt.fetch(i);case 4:u.t1=u.sent,u.t0.populate.call(u.t0,u.t1),u.next=11;break;case 8:throw u.prev=8,u.t2=u.catch(0),new K(u.t2.message);case 11:case"end":return u.stop()}},r,this,[[0,8]])}));function e(r){return n.apply(this,arguments)}return e}()},{key:"getJson",value:function(){return M(M({gvlSpecificationVersion:this.gvlSpecificationVersion,vendorListVersion:this.vendorListVersion,tcfPolicyVersion:this.tcfPolicyVersion,lastUpdated:this.lastUpdated,purposes:this.clonePurposes(),specialPurposes:this.cloneSpecialPurposes(),features:this.cloneFeatures(),specialFeatures:this.cloneSpecialFeatures(),stacks:this.cloneStacks()},this.dataCategories?{dataCategories:this.cloneDataCategories()}:{}),{},{vendors:this.cloneVendors()})}},{key:"cloneSpecialFeatures",value:function(){for(var e={},r=0,i=Object.keys(this.specialFeatures);r<i.length;r++){var o=i[r];e[o]=t.cloneFeature(this.specialFeatures[o])}return e}},{key:"cloneFeatures",value:function(){for(var e={},r=0,i=Object.keys(this.features);r<i.length;r++){var o=i[r];e[o]=t.cloneFeature(this.features[o])}return e}},{key:"cloneStacks",value:function(){for(var e={},r=0,i=Object.keys(this.stacks);r<i.length;r++){var o=i[r];e[o]=t.cloneStack(this.stacks[o])}return e}},{key:"cloneDataCategories",value:function(){for(var e={},r=0,i=Object.keys(this.dataCategories);r<i.length;r++){var o=i[r];e[o]=t.cloneDataCategory(this.dataCategories[o])}return e}},{key:"cloneSpecialPurposes",value:function(){for(var e={},r=0,i=Object.keys(this.specialPurposes);r<i.length;r++){var o=i[r];e[o]=t.clonePurpose(this.specialPurposes[o])}return e}},{key:"clonePurposes",value:function(){for(var e={},r=0,i=Object.keys(this.purposes);r<i.length;r++){var o=i[r];e[o]=t.clonePurpose(this.purposes[o])}return e}},{key:"cloneVendors",value:function(){for(var e={},r=0,i=Object.keys(this.fullVendorList);r<i.length;r++){var o=i[r];e[o]=t.cloneVendor(this.fullVendorList[o])}return e}},{key:"changeLanguage",value:function(){var n=at(ve().mark(function r(i){var o,u,b,L,V;return ve().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:o=i,A.prev=1,o=t.consentLanguages.parseLanguage(i),A.next=8;break;case 5:throw A.prev=5,A.t0=A.catch(1),new K("Error during parsing the language: "+A.t0.message);case 8:if(u=i.toUpperCase(),!(!(o.toLowerCase()===t.DEFAULT_LANGUAGE.toLowerCase()&&!t.LANGUAGE_CACHE.has(u))&&o!==this.lang_)){A.next=26;break}if(this.lang_=o,!t.LANGUAGE_CACHE.has(u)){A.next=15;break}b=t.LANGUAGE_CACHE.get(u);for(L in b)b.hasOwnProperty(L)&&(this[L]=b[L]);A.next=26;break;case 15:return V=t.baseUrl+t.languageFilename.replace("[LANG]",this.lang_.toLowerCase()),A.prev=16,A.next=19,this.fetchJson(V);case 19:this.cacheLang_=u,this.cacheLanguage(),A.next=26;break;case 23:throw A.prev=23,A.t1=A.catch(16),new K("unable to load language: "+A.t1.message);case 26:case"end":return A.stop()}},r,this,[[1,5],[16,23]])}));function e(r){return n.apply(this,arguments)}return e}()},{key:"language",get:function(){return this.lang_}},{key:"isVendorList",value:function(e){return e!==void 0&&e.vendors!==void 0}},{key:"populate",value:function(e){this.purposes=e.purposes,this.specialPurposes=e.specialPurposes,this.features=e.features,this.specialFeatures=e.specialFeatures,this.stacks=e.stacks,this.dataCategories=e.dataCategories,this.isVendorList(e)&&(this.gvlSpecificationVersion=e.gvlSpecificationVersion,this.tcfPolicyVersion=e.tcfPolicyVersion,this.vendorListVersion=e.vendorListVersion,this.lastUpdated=e.lastUpdated,typeof this.lastUpdated=="string"&&(this.lastUpdated=new Date(this.lastUpdated)),this.vendors_=e.vendors,this.fullVendorList=e.vendors,this.mapVendors(),this.isReady_=!0,this.isLatest&&t.CACHE.set(t.LATEST_CACHE_KEY,this.getJson()),t.CACHE.has(this.vendorListVersion)||t.CACHE.set(this.vendorListVersion,this.getJson())),this.cacheLanguage()}},{key:"mapVendors",value:function(e){var r=this;this.byPurposeVendorMap={},this.bySpecialPurposeVendorMap={},this.byFeatureVendorMap={},this.bySpecialFeatureVendorMap={},Object.keys(this.purposes).forEach(function(i){r.byPurposeVendorMap[i]={legInt:new Set,consent:new Set,flexible:new Set}}),Object.keys(this.specialPurposes).forEach(function(i){r.bySpecialPurposeVendorMap[i]=new Set}),Object.keys(this.features).forEach(function(i){r.byFeatureVendorMap[i]=new Set}),Object.keys(this.specialFeatures).forEach(function(i){r.bySpecialFeatureVendorMap[i]=new Set}),Array.isArray(e)||(e=Object.keys(this.fullVendorList).map(function(i){return+i})),this.vendorIds=new Set(e),this.vendors_=e.reduce(function(i,o){var u=r.vendors_[String(o)];return u&&u.deletedDate===void 0&&(u.purposes.forEach(function(b){r.byPurposeVendorMap[String(b)].consent.add(o)}),u.specialPurposes.forEach(function(b){r.bySpecialPurposeVendorMap[String(b)].add(o)}),u.legIntPurposes.forEach(function(b){r.byPurposeVendorMap[String(b)].legInt.add(o)}),u.flexiblePurposes&&u.flexiblePurposes.forEach(function(b){r.byPurposeVendorMap[String(b)].flexible.add(o)}),u.features.forEach(function(b){r.byFeatureVendorMap[String(b)].add(o)}),u.specialFeatures.forEach(function(b){r.bySpecialFeatureVendorMap[String(b)].add(o)}),i[o]=u),i},{})}},{key:"getFilteredVendors",value:function(e,r,i,o){var u=this,b=e.charAt(0).toUpperCase()+e.slice(1),L,V={};return e==="purpose"&&i?L=this["by"+b+"VendorMap"][String(r)][i]:L=this["by"+(o?"Special":"")+b+"VendorMap"][String(r)],L.forEach(function(P){V[String(P)]=u.vendors[String(P)]}),V}},{key:"getVendorsWithConsentPurpose",value:function(e){return this.getFilteredVendors("purpose",e,"consent")}},{key:"getVendorsWithLegIntPurpose",value:function(e){return this.getFilteredVendors("purpose",e,"legInt")}},{key:"getVendorsWithFlexiblePurpose",value:function(e){return this.getFilteredVendors("purpose",e,"flexible")}},{key:"getVendorsWithSpecialPurpose",value:function(e){return this.getFilteredVendors("purpose",e,void 0,!0)}},{key:"getVendorsWithFeature",value:function(e){return this.getFilteredVendors("feature",e)}},{key:"getVendorsWithSpecialFeature",value:function(e){return this.getFilteredVendors("feature",e,void 0,!0)}},{key:"vendors",get:function(){return this.vendors_}},{key:"narrowVendorsTo",value:function(e){this.mapVendors(e)}},{key:"isReady",get:function(){return this.isReady_}},{key:"clone",value:function(){var e=new t(this.getJson());return this.lang_!==t.DEFAULT_LANGUAGE&&e.changeLanguage(this.lang_),e}}],[{key:"baseUrl",get:function(){return this.baseUrl_},set:function(e){if(/^https?:\/\/vendorlist\.consensu\.org\//.test(e))throw new K("Invalid baseUrl!  You may not pull directly from vendorlist.consensu.org and must provide your own cache");e.length>0&&e[e.length-1]!=="/"&&(e+="/"),this.baseUrl_=e}},{key:"emptyLanguageCache",value:function(e){var r=!1;return e==null&&t.LANGUAGE_CACHE.size>0?(t.LANGUAGE_CACHE=new Map,r=!0):typeof e=="string"&&this.consentLanguages.has(e.toUpperCase())&&(t.LANGUAGE_CACHE.delete(e.toUpperCase()),r=!0),r}},{key:"emptyCache",value:function(e){var r=!1;return Number.isInteger(e)&&e>=0?(t.CACHE.delete(e),r=!0):e===void 0&&(t.CACHE=new Map,r=!0),r}},{key:"clonePurpose",value:function(e){return M(M({id:e.id,name:e.name,description:e.description},e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{}),e.illustrations?{illustrations:Array.from(e.illustrations)}:{})}},{key:"cloneFeature",value:function(e){return M(M({id:e.id,name:e.name,description:e.description},e.descriptionLegal?{descriptionLegal:e.descriptionLegal}:{}),e.illustrations?{illustrations:Array.from(e.illustrations)}:{})}},{key:"cloneDataCategory",value:function(e){return{id:e.id,name:e.name,description:e.description}}},{key:"cloneStack",value:function(e){return{id:e.id,name:e.name,description:e.description,purposes:Array.from(e.purposes),specialFeatures:Array.from(e.specialFeatures)}}},{key:"cloneDataRetention",value:function(e){return M(M({},typeof e.stdRetention=="number"?{stdRetention:e.stdRetention}:{}),{},{purposes:M({},e.purposes),specialPurposes:M({},e.specialPurposes)})}},{key:"cloneVendorUrls",value:function(e){return e.map(function(r){return M({langId:r.langId,privacy:r.privacy},r.legIntClaim?{legIntClaim:r.legIntClaim}:{})})}},{key:"cloneVendor",value:function(e){return M(M(M(M(M(M(M(M(M(M(M({id:e.id,name:e.name,purposes:Array.from(e.purposes),legIntPurposes:Array.from(e.legIntPurposes),flexiblePurposes:Array.from(e.flexiblePurposes),specialPurposes:Array.from(e.specialPurposes),features:Array.from(e.features),specialFeatures:Array.from(e.specialFeatures)},e.overflow?{overflow:{httpGetLimit:e.overflow.httpGetLimit}}:{}),typeof e.cookieMaxAgeSeconds=="number"||e.cookieMaxAgeSeconds===null?{cookieMaxAgeSeconds:e.cookieMaxAgeSeconds}:{}),e.usesCookies!==void 0?{usesCookies:e.usesCookies}:{}),e.policyUrl?{policyUrl:e.policyUrl}:{}),e.cookieRefresh!==void 0?{cookieRefresh:e.cookieRefresh}:{}),e.usesNonCookieAccess!==void 0?{usesNonCookieAccess:e.usesNonCookieAccess}:{}),e.dataRetention?{dataRetention:this.cloneDataRetention(e.dataRetention)}:{}),e.urls?{urls:this.cloneVendorUrls(e.urls)}:{}),e.dataDeclaration?{dataDeclaration:Array.from(e.dataDeclaration)}:{}),e.deviceStorageDisclosureUrl?{deviceStorageDisclosureUrl:e.deviceStorageDisclosureUrl}:{}),e.deletedDate?{deletedDate:e.deletedDate}:{})}},{key:"isInstanceOf",value:function(e){return Z(e)=="object"&&typeof e.narrowVendorsTo=="function"}}]),t}(se),z=mt;p(z,"LANGUAGE_CACHE",new Map),p(z,"CACHE",new Map),p(z,"LATEST_CACHE_KEY",0),p(z,"DEFAULT_LANGUAGE","EN"),p(z,"consentLanguages",new ue),p(z,"baseUrl_"),p(z,"latestFilename","vendor-list.json"),p(z,"versionedFilename","archives/vendor-list-v[VERSION].json"),p(z,"languageFilename","purposes-[LANG].json");var _e=function(s){G(t,s);var a=j(t);function t(n){var e;return _(this,t),e=a.call(this),c(y(e),"isServiceSpecific_",!1),c(y(e),"supportOOB_",!0),c(y(e),"useNonStandardTexts_",!1),c(y(e),"purposeOneTreatment_",!1),c(y(e),"publisherCountryCode_","AA"),c(y(e),"version_",2),c(y(e),"consentScreen_",0),c(y(e),"policyVersion_",4),c(y(e),"consentLanguage_","EN"),c(y(e),"cmpId_",0),c(y(e),"cmpVersion_",0),c(y(e),"vendorListVersion_",0),c(y(e),"numCustomPurposes_",0),c(y(e),"gvl_",void 0),c(y(e),"created",void 0),c(y(e),"lastUpdated",void 0),c(y(e),"specialFeatureOptins",new g),c(y(e),"purposeConsents",new g),c(y(e),"purposeLegitimateInterests",new g),c(y(e),"publisherConsents",new g),c(y(e),"publisherLegitimateInterests",new g),c(y(e),"publisherCustomConsents",new g),c(y(e),"publisherCustomLegitimateInterests",new g),c(y(e),"customPurposes",void 0),c(y(e),"vendorConsents",new g),c(y(e),"vendorLegitimateInterests",new g),c(y(e),"vendorsDisclosed",new g),c(y(e),"vendorsAllowed",new g),c(y(e),"publisherRestrictions",new ye),n&&(e.gvl=n),e.updated(),e}return k(t,[{key:"gvl",get:function(){return this.gvl_},set:function(e){z.isInstanceOf(e)||(e=new z(e)),this.gvl_=e,this.publisherRestrictions.gvl=e}},{key:"cmpId",get:function(){return this.cmpId_},set:function(e){if(e=Number(e),Number.isInteger(e)&&e>1)this.cmpId_=e;else throw new X("cmpId",e)}},{key:"cmpVersion",get:function(){return this.cmpVersion_},set:function(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.cmpVersion_=e;else throw new X("cmpVersion",e)}},{key:"consentScreen",get:function(){return this.consentScreen_},set:function(e){if(e=Number(e),Number.isInteger(e)&&e>-1)this.consentScreen_=e;else throw new X("consentScreen",e)}},{key:"consentLanguage",get:function(){return this.consentLanguage_},set:function(e){this.consentLanguage_=e}},{key:"publisherCountryCode",get:function(){return this.publisherCountryCode_},set:function(e){if(/^([A-z]){2}$/.test(e))this.publisherCountryCode_=e.toUpperCase();else throw new X("publisherCountryCode",e)}},{key:"vendorListVersion",get:function(){return this.gvl?this.gvl.vendorListVersion:this.vendorListVersion_},set:function(e){if(e=Number(e)>>0,e<0)throw new X("vendorListVersion",e);this.vendorListVersion_=e}},{key:"policyVersion",get:function(){return this.gvl?this.gvl.tcfPolicyVersion:this.policyVersion_},set:function(e){if(this.policyVersion_=parseInt(e,10),this.policyVersion_<0)throw new X("policyVersion",e)}},{key:"version",get:function(){return this.version_},set:function(e){this.version_=parseInt(e,10)}},{key:"isServiceSpecific",get:function(){return this.isServiceSpecific_},set:function(e){this.isServiceSpecific_=e}},{key:"useNonStandardTexts",get:function(){return this.useNonStandardTexts_},set:function(e){this.useNonStandardTexts_=e}},{key:"supportOOB",get:function(){return this.supportOOB_},set:function(e){this.supportOOB_=e}},{key:"purposeOneTreatment",get:function(){return this.purposeOneTreatment_},set:function(e){this.purposeOneTreatment_=e}},{key:"setAllVendorConsents",value:function(){this.vendorConsents.set(this.gvl.vendors)}},{key:"unsetAllVendorConsents",value:function(){this.vendorConsents.empty()}},{key:"setAllVendorsDisclosed",value:function(){this.vendorsDisclosed.set(this.gvl.vendors)}},{key:"unsetAllVendorsDisclosed",value:function(){this.vendorsDisclosed.empty()}},{key:"setAllVendorsAllowed",value:function(){this.vendorsAllowed.set(this.gvl.vendors)}},{key:"unsetAllVendorsAllowed",value:function(){this.vendorsAllowed.empty()}},{key:"setAllVendorLegitimateInterests",value:function(){this.vendorLegitimateInterests.set(this.gvl.vendors)}},{key:"unsetAllVendorLegitimateInterests",value:function(){this.vendorLegitimateInterests.empty()}},{key:"setAllPurposeConsents",value:function(){this.purposeConsents.set(this.gvl.purposes)}},{key:"unsetAllPurposeConsents",value:function(){this.purposeConsents.empty()}},{key:"setAllPurposeLegitimateInterests",value:function(){this.purposeLegitimateInterests.set(this.gvl.purposes)}},{key:"unsetAllPurposeLegitimateInterests",value:function(){this.purposeLegitimateInterests.empty()}},{key:"setAllSpecialFeatureOptins",value:function(){this.specialFeatureOptins.set(this.gvl.specialFeatures)}},{key:"unsetAllSpecialFeatureOptins",value:function(){this.specialFeatureOptins.empty()}},{key:"setAll",value:function(){this.setAllVendorConsents(),this.setAllPurposeLegitimateInterests(),this.setAllSpecialFeatureOptins(),this.setAllPurposeConsents(),this.setAllVendorLegitimateInterests()}},{key:"unsetAll",value:function(){this.unsetAllVendorConsents(),this.unsetAllPurposeLegitimateInterests(),this.unsetAllSpecialFeatureOptins(),this.unsetAllPurposeConsents(),this.unsetAllVendorLegitimateInterests()}},{key:"numCustomPurposes",get:function(){var e=this.numCustomPurposes_;if(Z(this.customPurposes)=="object"){var r=Object.keys(this.customPurposes).sort(function(i,o){return Number(i)-Number(o)});e=parseInt(r.pop(),10)}return e},set:function(e){if(this.numCustomPurposes_=parseInt(e,10),this.numCustomPurposes_<0)throw new X("numCustomPurposes",e)}},{key:"updated",value:function(){var e=new Date,r=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()));this.created=r,this.lastUpdated=r}}]),t}(se);p(_e,"consentLanguages",z.consentLanguages);var qe=function(){function s(){_(this,s)}return k(s,null,[{key:"encode",value:function(t,n){var e="",r;return t=Ke.process(t,n),Array.isArray(n==null?void 0:n.segments)?r=n.segments:r=new vt(t,n)[""+t.version],r.forEach(function(i,o){var u="";o<r.length-1&&(u="."),e+=Ne.encode(t,i)+u}),e}},{key:"decode",value:function(t,n){var e=t.split("."),r=e.length;n||(n=new _e);for(var i=0;i<r;i++){var o=e[i],u=te.decode(o.charAt(0)).substr(0,h.segmentType),b=de.ID_TO_KEY[T.decode(u,h.segmentType).toString()];Ne.decode(o,n,b)}return n}}]),s}(),Q;(function(s){s.PING="ping",s.GET_TC_DATA="getTCData",s.GET_IN_APP_TC_DATA="getInAppTCData",s.GET_VENDOR_LIST="getVendorList",s.ADD_EVENT_LISTENER="addEventListener",s.REMOVE_EVENT_LISTENER="removeEventListener"})(Q||(Q={}));var pe;(function(s){s.STUB="stub",s.LOADING="loading",s.LOADED="loaded",s.ERROR="error"})(pe||(pe={}));var fe;(function(s){s.VISIBLE="visible",s.HIDDEN="hidden",s.DISABLED="disabled"})(fe||(fe={}));var Le;(function(s){s.TC_LOADED="tcloaded",s.CMP_UI_SHOWN="cmpuishown",s.USER_ACTION_COMPLETE="useractioncomplete"})(Le||(Le={}));var Oe=function(){function s(a,t,n,e){_(this,s),c(this,"listenerId",void 0),c(this,"callback",void 0),c(this,"next",void 0),c(this,"param",void 0),c(this,"success",!0),Object.assign(this,{callback:a,listenerId:n,param:t,next:e});try{this.respond()}catch(r){this.invokeCallback(null)}}return k(s,[{key:"invokeCallback",value:function(t){var n=t!==null;typeof this.next=="function"?this.callback(this.next,t,n):this.callback(t,n)}}]),s}(),Ve=function(s){G(t,s);var a=j(t);function t(){return _(this,t),a.apply(this,arguments)}return k(t,[{key:"respond",value:function(){this.throwIfParamInvalid(),this.invokeCallback(new Xe(this.param,this.listenerId))}},{key:"throwIfParamInvalid",value:function(){if(this.param!==void 0&&(!Array.isArray(this.param)||!this.param.every(Number.isInteger)))throw new Error("Invalid Parameter")}}]),t}(Oe),yt=function(){function s(){_(this,s),c(this,"eventQueue",new Map),c(this,"queueNumber",0)}return k(s,[{key:"add",value:function(t){return this.eventQueue.set(this.queueNumber,t),this.queueNumber++}},{key:"remove",value:function(t){return this.eventQueue.delete(t)}},{key:"exec",value:function(){this.eventQueue.forEach(function(t,n){new Ve(t.callback,t.param,n,t.next)})}},{key:"clear",value:function(){this.queueNumber=0,this.eventQueue.clear()}},{key:"size",get:function(){return this.eventQueue.size}}]),s}(),w=function(){function s(){_(this,s)}return k(s,null,[{key:"reset",value:function(){delete this.cmpId,delete this.cmpVersion,delete this.eventStatus,delete this.gdprApplies,delete this.tcModel,delete this.tcString,delete this.tcfPolicyVersion,this.cmpStatus=pe.LOADING,this.disabled=!1,this.displayStatus=fe.HIDDEN,this.eventQueue.clear()}}]),s}();p(w,"apiVersion","2"),p(w,"tcfPolicyVersion"),p(w,"eventQueue",new yt),p(w,"cmpStatus",pe.LOADING),p(w,"disabled",!1),p(w,"displayStatus",fe.HIDDEN),p(w,"cmpId"),p(w,"cmpVersion"),p(w,"eventStatus"),p(w,"gdprApplies"),p(w,"tcModel"),p(w,"tcString");var De=k(function s(){_(this,s),c(this,"cmpId",w.cmpId),c(this,"cmpVersion",w.cmpVersion),c(this,"gdprApplies",w.gdprApplies),c(this,"tcfPolicyVersion",w.tcfPolicyVersion)}),bt=function(s){G(t,s);var a=j(t);function t(){var n;_(this,t);for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=a.call.apply(a,[this].concat(r)),c(y(n),"cmpStatus",pe.ERROR),n}return k(t)}(De),Xe=function(s){G(t,s);var a=j(t);function t(n,e){var r;if(_(this,t),r=a.call(this),c(y(r),"tcString",void 0),c(y(r),"listenerId",void 0),c(y(r),"eventStatus",void 0),c(y(r),"cmpStatus",void 0),c(y(r),"isServiceSpecific",void 0),c(y(r),"useNonStandardTexts",void 0),c(y(r),"publisherCC",void 0),c(y(r),"purposeOneTreatment",void 0),c(y(r),"outOfBand",void 0),c(y(r),"purpose",void 0),c(y(r),"vendor",void 0),c(y(r),"specialFeatureOptins",void 0),c(y(r),"publisher",void 0),r.eventStatus=w.eventStatus,r.cmpStatus=w.cmpStatus,r.listenerId=e,w.gdprApplies){var i=w.tcModel;r.tcString=w.tcString,r.isServiceSpecific=i.isServiceSpecific,r.useNonStandardTexts=i.useNonStandardTexts,r.purposeOneTreatment=i.purposeOneTreatment,r.publisherCC=i.publisherCountryCode,r.outOfBand={allowedVendors:r.createVectorField(i.vendorsAllowed,n),disclosedVendors:r.createVectorField(i.vendorsDisclosed,n)},r.purpose={consents:r.createVectorField(i.purposeConsents),legitimateInterests:r.createVectorField(i.purposeLegitimateInterests)},r.vendor={consents:r.createVectorField(i.vendorConsents,n),legitimateInterests:r.createVectorField(i.vendorLegitimateInterests,n)},r.specialFeatureOptins=r.createVectorField(i.specialFeatureOptins),r.publisher={consents:r.createVectorField(i.publisherConsents),legitimateInterests:r.createVectorField(i.publisherLegitimateInterests),customPurpose:{consents:r.createVectorField(i.publisherCustomConsents),legitimateInterests:r.createVectorField(i.publisherCustomLegitimateInterests)},restrictions:r.createRestrictions(i.publisherRestrictions)}}return lt(r)}return k(t,[{key:"createRestrictions",value:function(e){var r={};if(e.numRestrictions>0)for(var i=e.getMaxVendorId(),o=function(){var L=u.toString();e.getRestrictions(u).forEach(function(V){var P=V.purposeId.toString();r[P]||(r[P]={}),r[P][L]=V.restrictionType})},u=1;u<=i;u++)o();return r}},{key:"createVectorField",value:function(e,r){return r?r.reduce(function(i,o){return i[String(o)]=e.has(Number(o)),i},{}):Te(e).reduce(function(i,o){return i[o[0].toString(10)]=o[1],i},{})}}]),t}(De),Et=function(s){G(t,s);var a=j(t);function t(n){var e;return _(this,t),e=a.call(this,n),delete e.outOfBand,e}return k(t,[{key:"createVectorField",value:function(e){return Te(e).reduce(function(r,i){return r+=i[1]?"1":"0",r},"")}},{key:"createRestrictions",value:function(e){var r={};if(e.numRestrictions>0){var i=e.getMaxVendorId();e.getRestrictions().forEach(function(b){r[b.purposeId.toString()]="_".repeat(i)});for(var o=function(L){var V=L+1;e.getRestrictions(V).forEach(function(P){var A=P.restrictionType.toString(),q=P.purposeId.toString(),Ee=r[q].substr(0,L),Tt=r[q].substr(L+1);r[q]=Ee+A+Tt})},u=0;u<i;u++)o(u)}return r}}]),t}(Xe),wt=function(s){G(t,s);var a=j(t);function t(){var n;return _(this,t),n=a.call(this),c(y(n),"cmpLoaded",!0),c(y(n),"cmpStatus",w.cmpStatus),c(y(n),"displayStatus",w.displayStatus),c(y(n),"apiVersion",String(w.apiVersion)),c(y(n),"gvlVersion",void 0),w.tcModel&&w.tcModel.vendorListVersion&&(n.gvlVersion=+w.tcModel.vendorListVersion),n}return k(t)}(De),St=function(s){G(t,s);var a=j(t);function t(){return _(this,t),a.apply(this,arguments)}return k(t,[{key:"respond",value:function(){this.invokeCallback(new wt)}}]),t}(Oe),Ct=function(s){G(t,s);var a=j(t);function t(){return _(this,t),a.apply(this,arguments)}return k(t,[{key:"respond",value:function(){this.throwIfParamInvalid(),this.invokeCallback(new Et(this.param))}}]),t}(Ve),It=function(s){G(t,s);var a=j(t);function t(){return _(this,t),a.apply(this,arguments)}return k(t,[{key:"respond",value:function(){var e=this,r=w.tcModel,i=r.vendorListVersion,o;this.param===void 0&&(this.param=i),this.param===i&&r.gvl?o=r.gvl:o=new z(this.param),o.readyPromise.then(function(){e.invokeCallback(o.getJson())})}}]),t}(Oe),Lt=function(s){G(t,s);var a=j(t);function t(){return _(this,t),a.apply(this,arguments)}return k(t,[{key:"respond",value:function(){this.listenerId=w.eventQueue.add({callback:this.callback,param:this.param,next:this.next}),Pe(ge(t.prototype),"respond",this).call(this)}}]),t}(Ve),At=function(s){G(t,s);var a=j(t);function t(){return _(this,t),a.apply(this,arguments)}return k(t,[{key:"respond",value:function(){this.invokeCallback(w.eventQueue.remove(this.param))}}]),t}(Oe),Ze,$e,et,tt,nt,rt,re=k(function s(){_(this,s)});Ze=Q.PING,$e=Q.GET_TC_DATA,et=Q.GET_IN_APP_TC_DATA,tt=Q.GET_VENDOR_LIST,nt=Q.ADD_EVENT_LISTENER,rt=Q.REMOVE_EVENT_LISTENER,p(re,Ze,St),p(re,$e,Ve),p(re,et,Ct),p(re,tt,It),p(re,nt,Lt),p(re,rt,At);var st=function(){function s(){_(this,s)}return k(s,null,[{key:"has",value:function(t){return typeof t=="string"&&(t=Number(t)),this.set_.has(t)}}]),s}();p(st,"set_",new Set([0,2,void 0,null]));var Fe="__tcfapi",kt=function(){function s(a){if(_(this,s),c(this,"callQueue",void 0),c(this,"customCommands",void 0),a){var t=Q.ADD_EVENT_LISTENER;if(a!=null&&a[t])throw new Error("Built-In Custom Commmand for ".concat(t," not allowed: Use ").concat(Q.GET_TC_DATA," instead"));if(t=Q.REMOVE_EVENT_LISTENER,a!=null&&a[t])throw new Error("Built-In Custom Commmand for ".concat(t," not allowed"));a!=null&&a[Q.GET_TC_DATA]&&(a[Q.ADD_EVENT_LISTENER]=a[Q.GET_TC_DATA],a[Q.REMOVE_EVENT_LISTENER]=a[Q.GET_TC_DATA]),this.customCommands=a}try{this.callQueue=window[Fe]()||[]}catch(n){this.callQueue=[]}finally{window[Fe]=this.apiCall.bind(this),this.purgeQueuedCalls()}}return k(s,[{key:"apiCall",value:function(t,n,e){if(typeof t!="string")e(null,!1);else if(!st.has(n))e(null,!1);else{var r;if(typeof e!="function")throw new Error("invalid callback function");for(var i=arguments.length,o=new Array(i>3?i-3:0),u=3;u<i;u++)o[u-3]=arguments[u];w.disabled?e(new bt,!1):!this.isCustomCommand(t)&&!this.isBuiltInCommand(t)?e(null,!1):this.isCustomCommand(t)&&!this.isBuiltInCommand(t)?(r=this.customCommands)[t].apply(r,[e].concat(o)):t===Q.PING?this.isCustomCommand(t)?new re[t](this.customCommands[t],o[0],null,e):new re[t](e,o[0]):w.tcModel===void 0?this.callQueue.push([t,n,e].concat(o)):this.isCustomCommand(t)&&this.isBuiltInCommand(t)?new re[t](this.customCommands[t],o[0],null,e):new re[t](e,o[0])}}},{key:"purgeQueuedCalls",value:function(){var t=this.callQueue;this.callQueue=[],t.forEach(function(n){var e;(e=window)[Fe].apply(e,Te(n))})}},{key:"isCustomCommand",value:function(t){return this.customCommands&&typeof this.customCommands[t]=="function"}},{key:"isBuiltInCommand",value:function(t){return re[t]!==void 0}}]),s}(),_t=function(){function s(a,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,e=arguments.length>3?arguments[3]:void 0;_(this,s),c(this,"callResponder",void 0),c(this,"isServiceSpecific",void 0),c(this,"numUpdates",0),this.throwIfInvalidInt(a,"cmpId",2),this.throwIfInvalidInt(t,"cmpVersion",0),w.cmpId=a,w.cmpVersion=t,w.tcfPolicyVersion=4,this.isServiceSpecific=!!n,this.callResponder=new kt(e)}return k(s,[{key:"throwIfInvalidInt",value:function(t,n,e){if(!(typeof t=="number"&&Number.isInteger(t)&&t>=e))throw new Error("Invalid ".concat(n,": ").concat(t))}},{key:"update",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(w.disabled)throw new Error("CmpApi Disabled");w.cmpStatus=pe.LOADED,n?(w.displayStatus=fe.VISIBLE,w.eventStatus=Le.CMP_UI_SHOWN):w.tcModel===void 0?(w.displayStatus=fe.DISABLED,w.eventStatus=Le.TC_LOADED):(w.displayStatus=fe.HIDDEN,w.eventStatus=Le.USER_ACTION_COMPLETE),w.gdprApplies=t!==null,w.gdprApplies?(t===""?(w.tcModel=new _e,w.tcModel.cmpId=w.cmpId,w.tcModel.cmpVersion=w.cmpVersion):w.tcModel=qe.decode(t),w.tcModel.isServiceSpecific=this.isServiceSpecific,w.tcfPolicyVersion=Number(w.tcModel.policyVersion),w.tcString=t):w.tcModel=null,this.numUpdates===0?this.callResponder.purgeQueuedCalls():w.eventQueue.exec(),this.numUpdates++}},{key:"disable",value:function(){w.disabled=!0,w.cmpStatus=pe.ERROR}}]),s}(),Ot=function(){function s(){_(this,s)}return k(s,[{key:"receiveMessage",value:function(t){var n=typeof t.data=="string",e={};try{n?e=JSON.parse(t.data):e=t.data}catch(L){}if(e&&e.__tcfapiCall){var r=e.__tcfapiCall.callId,i=e.__tcfapiCall.command,o=e.__tcfapiCall.parameter,u=e.__tcfapiCall.version,b=function(V,P){var A={__tcfapiReturn:{returnValue:V,success:P,callId:r,command:i}};t&&t.source&&t.source.postMessage&&t.source.postMessage(n?JSON.stringify(A):A,"*")};window.__tcfapi.apply(window,[i,u,b,o])}else e&&e.hasOwnProperty("OnetrustIABCookies")&&(e.OnetrustIABCookies==="blocked"&&(e.OnetrustIABCookies=null),window.OneTrust.updateConsentFromCookies(e.OnetrustIABCookies))}},{key:"initializeTCF",value:function(){window.removeEventListener("message",window.receiveOTMessage),delete window.receiveOTMessage,(window.attachEvent||window.addEventListener)("message",function(t){return he.receiveMessage(t)},!1)}},{key:"getGVLObject",value:function(t,n,e){if(n){var r=n.substr(n.lastIndexOf("/")+1);z.baseUrl=n.replace("/"+r,""),z.latestFilename=r}return new z(e,{language:t})}},{key:"getTCModelObject",value:function(t){return new _e(t)}},{key:"getTCStringObject",value:function(){return qe}},{key:"getCmpApi",value:function(t,n,e){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return new _t(t,n,e,r)}},{key:"getPurposeRestriction",value:function(t,n){return new ce(t,n)}}]),s}(),he=new Ot;he.initializeTCF();var Vt={gvl:he.getGVLObject,tcModel:he.getTCModelObject,tcString:he.getTCStringObject,cmpApi:he.getCmpApi,purposeRestriction:he.getPurposeRestriction};window.otIabModule=Se(W({},window.otIabModule),{tcfSdkRef:Vt})})();})();
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
