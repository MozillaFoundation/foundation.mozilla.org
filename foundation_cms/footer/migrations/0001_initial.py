# Generated by Django 4.2.28 on 2026-02-26 15:52

import uuid

import django.db.models.deletion
import modelcluster.fields
import wagtail.fields
import wagtail.models.preview
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ("wagtailcore", "0094_alter_page_locale"),
        ("images", "0002_foundationcustomimage_original_gif"),
    ]

    operations = [
        migrations.CreateModel(
            name="SiteFooter",
            fields=[
                ("id", models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("translation_key", models.UUIDField(default=uuid.uuid4, editable=False)),
                ("live", models.BooleanField(default=True, editable=False, verbose_name="live")),
                (
                    "has_unpublished_changes",
                    models.BooleanField(default=False, editable=False, verbose_name="has unpublished changes"),
                ),
                (
                    "first_published_at",
                    models.DateTimeField(blank=True, db_index=True, null=True, verbose_name="first published at"),
                ),
                (
                    "last_published_at",
                    models.DateTimeField(editable=False, null=True, verbose_name="last published at"),
                ),
                ("go_live_at", models.DateTimeField(blank=True, null=True, verbose_name="go live date/time")),
                ("expire_at", models.DateTimeField(blank=True, null=True, verbose_name="expiry date/time")),
                ("expired", models.BooleanField(default=False, editable=False, verbose_name="expired")),
                (
                    "title",
                    models.CharField(
                        help_text="For internal identification only (e.g. 'Main Footer')", max_length=100
                    ),
                ),
                (
                    "logo_link_url",
                    models.CharField(
                        default="/", help_text="URL when clicking the footer logo (default: homepage)", max_length=500
                    ),
                ),
                (
                    "show_donate_button",
                    models.BooleanField(default=True, help_text="Show the Donate button in footer"),
                ),
                (
                    "donate_button_text",
                    models.CharField(
                        blank=True, default="Donate", help_text="Text for the donate button", max_length=50
                    ),
                ),
                (
                    "donate_button_url",
                    models.CharField(
                        default="?form=donate-footer",
                        help_text="URL or query parameter for donate form",
                        max_length=500,
                    ),
                ),
                (
                    "show_language_switcher",
                    models.BooleanField(default=True, help_text="Show language switcher in footer"),
                ),
                (
                    "show_newsletter_signup",
                    models.BooleanField(default=True, help_text="Show newsletter signup form in footer"),
                ),
                (
                    "legal_text",
                    wagtail.fields.RichTextField(
                        blank=True, help_text="Legal disclaimer text shown at the bottom of the footer"
                    ),
                ),
                (
                    "latest_revision",
                    models.ForeignKey(
                        blank=True,
                        editable=False,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        to="wagtailcore.revision",
                        verbose_name="latest revision",
                    ),
                ),
                (
                    "live_revision",
                    models.ForeignKey(
                        blank=True,
                        editable=False,
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        to="wagtailcore.revision",
                        verbose_name="live revision",
                    ),
                ),
                (
                    "locale",
                    models.ForeignKey(
                        editable=False,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="wagtailcore.locale",
                        verbose_name="locale",
                    ),
                ),
                (
                    "logo",
                    models.ForeignKey(
                        blank=True,
                        help_text="Custom logo for footer (default: Mozilla Foundation wordmark)",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="+",
                        to="images.foundationcustomimage",
                    ),
                ),
            ],
            options={
                "verbose_name": "Site Footer",
                "verbose_name_plural": "Site Footers",
                "abstract": False,
                "unique_together": {("translation_key", "locale")},
            },
            bases=(wagtail.models.preview.PreviewableMixin, models.Model),
        ),
        migrations.CreateModel(
            name="SiteFooterSettings",
            fields=[
                ("id", models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                (
                    "active_footer",
                    models.ForeignKey(
                        blank=True,
                        help_text="Select the footer to display on this site",
                        null=True,
                        on_delete=django.db.models.deletion.SET_NULL,
                        related_name="site_footer_settings",
                        to="footer.sitefooter",
                        verbose_name="Active Footer",
                    ),
                ),
                (
                    "site",
                    models.OneToOneField(
                        editable=False, on_delete=django.db.models.deletion.CASCADE, to="wagtailcore.site"
                    ),
                ),
            ],
            options={
                "verbose_name": "Site Footer",
                "verbose_name_plural": "Site Footer",
            },
        ),
        migrations.CreateModel(
            name="FooterSocialLink",
            fields=[
                ("id", models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("translation_key", models.UUIDField(default=uuid.uuid4, editable=False)),
                ("sort_order", models.IntegerField(blank=True, editable=False, null=True)),
                (
                    "platform",
                    models.CharField(
                        choices=[
                            ("bluesky", "Bluesky"),
                            ("instagram", "Instagram"),
                            ("linkedin", "LinkedIn"),
                            ("spotify", "Spotify"),
                            ("tiktok", "TikTok"),
                        ],
                        help_text="Select social media platform",
                        max_length=50,
                    ),
                ),
                ("url", models.URLField(help_text="Full URL to your social media profile")),
                (
                    "footer",
                    modelcluster.fields.ParentalKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="social_links",
                        to="footer.sitefooter",
                    ),
                ),
                (
                    "locale",
                    models.ForeignKey(
                        editable=False,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="wagtailcore.locale",
                        verbose_name="locale",
                    ),
                ),
            ],
            options={
                "verbose_name": "Social Media Link",
                "verbose_name_plural": "Social Media Links",
                "ordering": ["sort_order"],
            },
        ),
        migrations.CreateModel(
            name="FooterInternalLink",
            fields=[
                ("id", models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("translation_key", models.UUIDField(default=uuid.uuid4, editable=False)),
                ("sort_order", models.IntegerField(blank=True, editable=False, null=True)),
                ("label", models.CharField(help_text="Link text displayed to users", max_length=100)),
                ("url", models.CharField(help_text="URL for this link", max_length=500)),
                (
                    "footer",
                    modelcluster.fields.ParentalKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="internal_links",
                        to="footer.sitefooter",
                    ),
                ),
                (
                    "locale",
                    models.ForeignKey(
                        editable=False,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="wagtailcore.locale",
                        verbose_name="locale",
                    ),
                ),
            ],
            options={
                "verbose_name": "Internal Link",
                "verbose_name_plural": "Internal Links",
                "ordering": ["sort_order"],
                "abstract": False,
            },
        ),
        migrations.CreateModel(
            name="FooterExternalLink",
            fields=[
                ("id", models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name="ID")),
                ("translation_key", models.UUIDField(default=uuid.uuid4, editable=False)),
                ("sort_order", models.IntegerField(blank=True, editable=False, null=True)),
                ("label", models.CharField(help_text="Link text displayed to users", max_length=100)),
                ("url", models.CharField(help_text="URL for this link", max_length=500)),
                (
                    "footer",
                    modelcluster.fields.ParentalKey(
                        on_delete=django.db.models.deletion.CASCADE,
                        related_name="external_links",
                        to="footer.sitefooter",
                    ),
                ),
                (
                    "locale",
                    models.ForeignKey(
                        editable=False,
                        on_delete=django.db.models.deletion.PROTECT,
                        related_name="+",
                        to="wagtailcore.locale",
                        verbose_name="locale",
                    ),
                ),
            ],
            options={
                "verbose_name": "External Link",
                "verbose_name_plural": "External Links",
                "ordering": ["sort_order"],
                "abstract": False,
            },
        ),
        migrations.AddConstraint(
            model_name="footersociallink",
            constraint=models.UniqueConstraint(
                fields=("translation_key", "locale"), name="unique_translation_key_locale_footer_footersociallink"
            ),
        ),
        migrations.AddConstraint(
            model_name="footerinternallink",
            constraint=models.UniqueConstraint(
                fields=("translation_key", "locale"), name="unique_translation_key_locale_footer_footerinternallink"
            ),
        ),
        migrations.AddConstraint(
            model_name="footerexternallink",
            constraint=models.UniqueConstraint(
                fields=("translation_key", "locale"), name="unique_translation_key_locale_footer_footerexternallink"
            ),
        ),
    ]
