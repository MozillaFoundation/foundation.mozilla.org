{% extends "./base_streamfield_block.html" %}
{% load l10n wagtailcore_tags %}

{% comment %}
The iframe_block.html is used on Article pages and Blog pages.
{% endcomment %}

{% block block_container_classes %}
    {% if value.iframe_width == "full_width" %} full-width {% endif %}
{% endblock %}

{% block block_row_classes %}
    tw-mx-0
{% endblock %}

{% block main_block_class %}
    streamfield-content
    {% if value.iframe_width == "full_width" %} full-width
    {% elif value.iframe_width == "wide" %} wide
    {% endif %}
{% endblock %}

{% block block_content %}
    <div class="tw-my-4">
        <div class="embed-responsive embed-responsive-16by9" {% if value.height %}style="height: {{ value.height|unlocalize }}px;"
             {% endif %}>
            <iframe src="{{ value.url }}" class="embed-responsive-item" {% if value.disable_scroll %}scrolling="no" style="overflow: hidden;"{% endif %}></iframe>
        </div>
        {% if value.caption %}
            <p class="tw-body-small tw-mt-4">
                {% if value.caption_url %}
                    {% with link=value.caption_url.0 %}
                        <a href="{{ link.url }}" {% if link.new_window %}target="_blank"{% endif %}>{{ value.caption }}</a>
                    {% endwith %}
                {% else %}
                    {{ value.caption }}
                {% endif %}
            </p>
        {% endif %}
    </div>
{% endblock %}
