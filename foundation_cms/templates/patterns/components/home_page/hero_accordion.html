{% load wagtailimages_tags %}

<div class="hero-accordion">
  {% for block in page.hero_accordion %}
    {% if block.block_type == 'video_panel' %}
      <div class="hero-accordion__panel hero-accordion__panel--video">
        <p>[Label] {{ block.value.label }}</p>
        <div>
          [Thumbnail]
          {% image block.value.thumbnail original as img %}
          <img src="{{ img.url }}" alt="(FIXME:TODO: check with designers how they plan to use the image. This will determine if we need to include alt text.)">
        </div>
        {% if block.value.heading %}
          <p>[Optional Heading] {{ block.value.heading }}</p>
        {% endif %}
        <div>
          [Video]
          {% if "vimeo.com" in block.value.video_url %}
            {% with video_id=block.value.video_url|cut:"https://vimeo.com/" %}
              <iframe
                src="https://player.vimeo.com/video/{{ video_id }}"
                width="640" height="360" frameborder="0"
                allow="autoplay; fullscreen; picture-in-picture"
                allowfullscreen>
              </iframe>
            {% endwith %}
          {% endif %}
        </div>
      </div>
    {% elif block.block_type == 'image_text_panel' %}
      <div class="hero-accordion__panel hero-accordion__panel--image-text">
        <p>[Label] {{ block.value.label }}</p>
        <div>
          [Image]
          {% image block.value.image original as img %}
          <img src="{{ img.url }}" alt="(FIXME:TODO: check with designers how they plan to use the image. This will determine if we need to include alt text.)">
        </div>
        <p>[Heading] {{ block.value.heading }}</p>
        {% if block.value.description %}
          <p>[Optional Description] {{ block.value.description }}</p>
        {% endif %}
        <a href="{{ block.value.cta_link }}">{{ block.value.cta_text }}</a>
      </div>
    {% endif %}
  {% endfor %}
</div>
