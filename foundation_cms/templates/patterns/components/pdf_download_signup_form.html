{% load static i18n l10n localization %}

{% get_current_language as current_language %}

<div class="newsletter-signup newsletter-signup__container" data-signup-id="{{ pdf_download_signup.id }}" data-layout="{{ pdf_download_signup.layout }}" data-current-language="{{ current_language }}" data-form-type="pdf_download">

  <div class="newsletter-signup__error-message newsletter-signup__error-message--hidden">
    {% trans "Something went wrong and your download wasn't completed. Please try again later." %}
  </div>

  <form class="newsletter-signup__form" novalidate>

    <div class="newsletter-signup__cta-wrapper">
      <p class="newsletter-signup__cta-header">{{ pdf_download_signup.cta_header }}</p>
      {% if pdf_download_signup.cta_description %}
        <p class="newsletter-signup__cta-description">{{ pdf_download_signup.cta_description }}</p>
      {% endif %}
    </div>

    <div class="newsletter-signup__form-grid">
      <div class="newsletter-signup__fieldset">

        <div class="newsletter-signup__field">
          <input
            class="newsletter-signup__input"
            type="email"
            name="email"
            placeholder="{% trans "Email" %}"
            aria-label="{% trans "Email" %}"
            required
          >
          <div class="newsletter-signup__field-error newsletter-signup__field-error--hidden email-error-message">
            {% trans "Please enter a valid email address." %}
          </div>
        </div>

        <div class="newsletter-signup__field newsletter-signup__field--hidden">
          <select class="newsletter-signup__input" name="country" aria-label="{% trans "Country" %}" required>
            <option value="" disabled selected>{% trans "Your country" %}</option>
          </select>
        </div>

        <div class="newsletter-signup__field newsletter-signup__field--hidden">
          <select class="newsletter-signup__input" name="language" aria-label="{% trans "Language" %}" required>
            <option value="en">English</option>
          </select>
        </div>

        <div class="newsletter-signup__field newsletter-signup__field--hidden">
          <label>
            <input type="checkbox" name="privacy">
            <span>
              {% blocktrans with privacy_link='https://www.mozilla.org/privacy/websites/' trimmed %}
                I agree to Mozilla's <a href="{{ privacy_link }}" target="_blank" class="newsletter-signup__link">Privacy Policy</a>
                and understand that Mozilla will send me the requested content via email.
              {% endblocktrans %}
            </span>
          </label>
          <div class="newsletter-signup__field-error newsletter-signup__field-error--hidden privacy-error-message">
            {% trans "Please check this box if you want to proceed." %}
          </div>
        </div>

      </div>

      <div class="newsletter-signup__button-wrapper">
        <button type="submit" class="newsletter-signup__button btn-primary">
          <span class="btn-primary__roller">
            <span class="loading-message">
              {% trans "Processing..." %}
            </span>
            <span class="btn-primary__rolltext">
              <span class="btn-primary__text">{{ pdf_download_signup.button_text }}</span>
              <span class="btn-primary__text btn-primary__text--roll-in">{{ pdf_download_signup.button_text }}</span>
            </span>
          </span>
        </button>
      </div>

    </div>

  </form>

  <div class="newsletter-signup__success-message newsletter-signup__success-message--hidden">
    <div class="newsletter-signup__success-content">
      <h4 class="newsletter-signup__success-title">{% trans "Thank you!" %}</h4>
      <div>
        <p>
          {% blocktrans trimmed %}
            Your download link will be sent to your email address shortly.
            <strong>Please check your inbox and spam folder for an email from us</strong>.
          {% endblocktrans %}
        </p>
      </div>
    </div>

    <div class="newsletter-signup__success-media">
      <img src="{% static 'foundation_cms/_images/newsletter-signup-success.jpg' %}" width="100%" height="100%" alt="{% trans "PDF download success image" %}" />
    </div>
  </div>

</div>
