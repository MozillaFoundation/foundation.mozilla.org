{% extends "pages/buyersguide/catalog.html" %}
{% load wagtailcore_tags %}

{% block body_id %}home{% endblock %}

{% block hero %}
  {{ block.super }}
  <div class="editorial-content">
    {% with hero_featured_article=page.hero_featured_article %}
      {% if hero_featured_article %}
        <div class="tw-container">
          <div class="tw-row">
            <div class="tw-px-4 tw-w-full">
              <h2 class="tw-h1-heading">
                <a href=" {% pageurl hero_featured_article %}">{{ hero_featured_article.title }}</a>
              </h2>

              <div>
                By
                {% with author_profiles=hero_featured_article.get_author_profiles %}
                  {% if author_profiles %}
                    <ul>
                      {% for author_profile in author_profiles %}
                        <li>{{ author_profile.name }}</li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                {% endwith %}
              </div>
            </div>
          </div>
        </div>
      {% endif %}
    {% endwith %}

    <div class="tw-container">
      {% with hero_supporting_articles=page.get_hero_supporting_articles %}
        {% if hero_supporting_articles %}
          <div class="tw-row">
            <div class="tw-px-4">
              {% include "fragments/buyersguide/related_reading.html" with heading=page.hero_supporting_articles_heading articles=hero_supporting_articles all_articles=False %}
            </div>
          </div>
        {% endif %}
      {% endwith %}
    </div>

    <div class="tw-container tw-my-6">
      <div class="tw-row">
        {% with popular_articles=page.get_featured_articles %}
          {% if popular_articles %}
            <div class="tw-px-4 tw-w-full large:tw-w-1/3 tw-mb-4">
              {% include "fragments/buyersguide/popular_articles.html" %}
            </div>
          {% endif %}
        {% endwith %}

        {% with product_updates=page.get_featured_updates %}
          {% if product_updates %}
            <div class="tw-px-4 tw-w-full large:tw-w-1/3 tw-mb-4">
              <h2>In the press</h2>

              <ul>
                {% for update in product_updates %}
                  <li>
                    <div>
                      <strong>{{ update.title }}</strong>
                    </div>
                    <div>
                      <a href="{{ update.source }}">{{ update.author }}</a>
                    </div>
                  </li>
                {% endfor %}
              </ul>
            </div>
          {% endif %}
        {% endwith %}
      </div>
    </div>
  </div>
{% endblock hero %}
