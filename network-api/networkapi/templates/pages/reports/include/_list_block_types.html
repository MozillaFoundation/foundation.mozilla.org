{% load wagtailadmin_tags wagtailcore_tags report_tags %}

<table class="listing {% block table_classname %}{% endblock table_classname %}">
    <col width="25%" />
    <col width="10%" />
    <col width="10%" />
    <col />
    <thead>
        {% block post_parent_page_headers %}
            <tr class="table-headers">
                <th class="title">
                    Block
                </th>
                <th class="app-label">
                    Pages
                </th>
                <th class="app-label">
                    Type
                </th>
                <th class="app-label">
                    Used on
                </th>
                {% block extra_columns %}
                {% endblock extra_columns %}
            </tr>
        {% endblock post_parent_page_headers %}
    </thead>
    <tbody>
        {% if page_blocks %}
            {% for page_block in page_blocks %}
                <tr class="{% block page_row_classname %}{% endblock page_row_classname %}">
                    <td class="app-label" valign="top">
                        {% block_name page_block %}
                    </td>
                    <td class="app-label" valign="top">
                        {{ page_block.count }}
                    </td>
                    <td class="app-label" valign="top">
                        <span class="status-tag status-tag--label">{{ page_block.type_label }}</span>
                    </td>
                    <td class="app-label" valign="top">
                        {% page_types_block page_block.content_types %}
                    </td>
                    {% block extra_page_data %}
                    {% endblock extra_page_data %}
                </tr>
            {% endfor %}
        {% else %}
            {% block no_results %}
                <p>No blocks found.</p>
            {% endblock no_results %}
        {% endif %}
    </tbody>
</table>