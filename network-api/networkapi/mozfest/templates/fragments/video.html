{% load wagtailcore_tags wagtailimages_tags i18n static %}

<div class="embed-responsive tw-bg-black tw-text-black tw-relative tw-aspect-video" data-mozfest-video>
    {# Thumbnail and overlay #}
    {% if video.thumbnail %}
        {% image video.thumbnail fill-1200x600 as img %}
    {% endif %}
    <button
        data-mozfest-video-button
        aria-label="{% trans "Watch Video" %}"
        class="tw-bg-black tw-w-full tw-h-full tw-absolute tw-inset-0 tw-group tw-z-10 tw-bg-cover tw-bg-center tw-transition tw-duration-500 tw-p-0"
        data-video-url="{{ video.url }}?&autoplay=1"
        {% if video.thumbnail %}style="background-image: url({{ img.url }});"{% endif %}
    >
        <span class="tw-relative tw-w-full tw-h-full tw-flex tw-justify-center tw-items-center">
            {# Opacity layer #}
            <div class="tw-absolute tw-bg-black tw-opacity-25 tw-inset-0 tw-w-full tw-h-full"></div>
            {# Play Icon #}
            <img src="{% static "_images/mozfest/play-circle-grey.svg" %}"
                class="group-hover:tw--translate-y-2 tw-relative tw-z-10 tw-transition tw-w-[75px] tw-h-[75px] medium:tw-w-[108px] medium:tw-h-[108px]" alt=""/>
        </span>
        {% if video.caption %}
            <span class="tw-absolute tw-bottom-0 tw-z-10 tw-bg-white tw-py-4 tw-px-6 tw-flex tw-gap-4 tw-items-center tw-body-large tw-font-zilla">
                <img src="{% static "_images/mozfest/play-circle-black.svg" %}" class="tw-w-[24px] tw-h-[24px]" alt=""/>
                <b>{{ video.caption }}</b>
            </span>
        {% endif %}
    </button>

    {# Video #}
    <iframe src="" frameborder="0" class="embed-responsive-item" allow="autoplay; encrypted-media" allowfullscreen></iframe>
</div>

<h2 class="tw-h3-heading tw-mt-8">{{ video.title }}</h2>
<div class="[&_p,li,ul]:last:tw-mb-0">
    {{ video.text }}
</div>
