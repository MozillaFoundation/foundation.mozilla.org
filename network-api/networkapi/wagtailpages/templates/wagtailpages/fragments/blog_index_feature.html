{% load wagtailimages_tags i18n localization %}

{% comment %}
  This template is similar to the featured_blogs.html code *and* the card.html
  code, because it kind of needs to look like the first, while proportioning
  itself similar to the second.

  TODO: figure out if we can unify the three templates.
{% endcomment %}

<div>
  <a href="{% relocalized_url blog.localized.url %}">
    {% image blog.localized.specific.get_meta_image fill-540x303 %}
  </a>
</div>

<div class="tw-flex tw-flex-col tw-flex-1 tw-border-b-4 tw-border-gray-05 -tw-mt-5 tw-bg-white tw-relative tw-mx-2 medium:tw-mx-5 tw-p-4">
  <p class="tw-h6-heading tw-mb-2">
    {% for topic in blog.localized.topics.all %}
      {% localized_version topic as localized_topic %}
      <a href="/blog/topic/{{topic.slug}}">{{ localized_topic }}</a>{% if not forloop.last %}, {% endif %}
    {% endfor %}
  </p>
  <a href="{% relocalized_url blog.localized.url %}" class="tw-group tw-block hover:tw-no-underline">
    <h5 class="tw-mb-2 tw-h3-heading group-hover:tw-underline">
     {{blog.localized.title}}
    </h5>
    <p class="tw-body-small tw-mb-2">
      {% if blog.author %}
        {% blocktrans with author=blog.author %}by {{author}}{% endblocktrans %}
      {% endif %}
      {% if blog.first_published_at %} {% blocktrans with date=blog.first_published_at|date:"DATE_FORMAT" %}on {{date}}{% endblocktrans %}{% else %}not published yet{% endif %}
    </p>
    <p>{{blog.localized.search_description}}</p>
  </a>
</div>
