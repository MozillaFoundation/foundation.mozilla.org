{% extends "./index_page.html" %}

{% load wagtailcore_tags wagtailimages_tags i18n localization homepage_tags blog_tags static %}


{% block rss_metadata %}
  <link rel="alternate" type="application/rss+xml" href="{% url 'rss-feed' %}" />
{% endblock %}


{% block featured %}
  {% if not filtered %}
    <div class="row">
      {%  for feature in page.specific.featured_pages.all %}
      <div class="col-12 col-md-6 mb-5">
        <div class="card-regular h-100 d-flex flex-column">
          {% include "./fragments/blog_index_feature.html" with blog=feature.blog %}
        </div>
      </div>
      {% endfor %}
    </div>
  {% endif %}
{% endblock %}

{% block featured_video_post %}
  {% if not filtered %}
    {% with self.featured_video_post.first as featured_video_post %}
    <div class="mb-5"> 
      
      

      <div class="tw-grid tw-grid-cols-12  tw-relative">

<div class="tw-col-span-12 large:tw-col-span-4 tw-pr-[36px] tw-flex tw-flex-col tw-py-3 large:tw-py-0">


  <div class="tw-flex tw-flex-wrap">


  {% with topics=featured_video_post.blog.topics.all %}
  {% for topic in topics %}
    {% localized_version topic as localized_topic %}
    {% get_root_or_page as parent_page %}
    {# If we have a "root" context variable, we know this card is generated on an index page (or index page subroute) #}
    <a class="tw-h6-heading tw-my-0 tw-text-blue-80 tw-mr-2" href="{% localizedroutablepageurl parent_page "entries_by_topic" topic.slug %}">{{ localized_topic }}</a>
    {% if not forloop.last %}
      <span class="tw-h6-heading tw-text-blue-80 tw-mr-2"> / </span>
    {% endif %}
  {% endfor %}
{% endwith %}

<img src="{% static "_images/video-icon.svg" %}" alt="{% trans "information" context "icon description for screen readers" %}" class="tw-h-4 tw-w-4 tw-mb-1 tw-mr-2">



<span class="tw-h6-heading tw-text-gray-40"> {{ featured_video_post.blog.first_published_at|date:"DATE_FORMAT" }} </span>
</div>

<a class="tw-h1-heading tw-text-3xl tw-my-2" href="">{{ featured_video_post.blog.localized.title}}</a>

<p class="tw-body">{{ featured_video_post.blog.get_meta_description }}</p>

<div class="tw-mt-auto">
{% include "./fragments/blog_authors.html" with blog_page=featured_video_post.blog %}
</div>

</div>
<div class="tw-col-span-12 large:tw-col-span-8 tw-order-first large:tw-order-last tw-overflow-hidden">
  {% with featured_video_post.video_url as video_url  %}
  <div id="featured-video" class="tw-flex tw-relative hover:tw-cursor-pointer tw-group">
      <video class="hero-video tw-absolute tw-top-0 tw-left-0 tw-min-h-full tw-min-w-full tw-w-auto tw-h-auto tw-overflow-hidden" loop muted>
        <source src="{{video_url}}" type="video/mp4">
      </video>
      <div class="tw-absolute tw-top-0 tw-left-0 tw-min-h-full tw-min-w-full tw-w-auto tw-h-auto tw-overflow-hidden tw-flex tw-justify-center tw-content-center">
        <img class="play-button tw-h-[4rem] tw-w-[4rem] tw-opacity-75 hover:tw-opacity-100" src="{% static "_images/video_play_button.svg" %}" alt="Play Button" />
      </div>
  </div>
  
{% endwith %}


</div>




      </div>






    </div>


    {% endwith %}
  {% endif %}
{% endblock %}

{% block newsletter-callout-box %}
  {% if not filtered %}
    {% include "./fragments/newsletter-signup-box.html" %}
  {% endif %}
{% endblock %}
