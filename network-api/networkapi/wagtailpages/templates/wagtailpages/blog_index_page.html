{% extends "./index_page.html" %}

{% load wagtailcore_tags wagtailimages_tags i18n localization blog_tags static %}


{% block rss_metadata %}
  <link rel="alternate" type="application/rss+xml" href="{% url 'rss-feed' %}" />
{% endblock %}


{% block featured %}
  {% if not filtered %}
    <div class="tw-grid tw-grid-cols-12 tw-gap-x-5">
      {%  for feature in page.specific.featured_pages.all %}
        {% if forloop.first %}
         <div class="tw-col-span-12">
          {% include "./fragments/blog_index_feature.html" with blog_page=feature.blog %}
          </div>
        {% elif forloop.counter == 5 %}
          <div class="tw-col-span-12">
            {% include "./fragments/blog_index_feature.html" with blog_page=feature.blog content_left=True %}
         </div>
        {% else %}
          <div class="tw-col-span-12 medium:tw-col-span-6 large:tw-col-span-4 mb-5">
            {% include "./fragments/blog_card.html" with page=feature.blog %}
          </div>
        {% endif %}
      {% endfor %}

      {%  for video_post in page.specific.featured_video_post.all %}
        {% include "./fragments/blog_index_feature.html" with blog_page=video_post.blog_page video_url=video_post.video_url %}
      {% endfor %}
    </div>

  {% endif %}
{% endblock %}

{% block subcontent %}
  {% if not filtered %}
    <h2 class="tw-uppercase tw-text-3xl tw-font-bold tw-font-sans tw-text-gray-80 tw-mb-5">{% trans "Latest Blog Posts" %}</h2>
    <div class="row">
      {% include "./fragments/entry_cards_with_related_topics_callout.html" %}
    </div>
  {% else %}
    <div class="row">
      {% include "./fragments/entry_cards.html" %}
    </div>
  {% endif %}
{% endblock %}

{% block newsletter-callout-box %}
  {% if not filtered %}
    {% include "./fragments/newsletter-signup-box.html" with show_socials=True %}
  {% endif %}
{% endblock %}
