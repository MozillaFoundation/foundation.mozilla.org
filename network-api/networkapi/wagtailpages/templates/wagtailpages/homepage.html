{% extends "pages/base.html" %}
{% load wagtailcore_tags wagtailimages_tags homepage_tags card_tags wagtailmetadata_tags multi_image_tags i18n %}

{% block body_id %}home{% endblock %}

{% block org_schema %}
  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Organization",
      "legalName" : "Mozilla Foundation",
      "url" : "https://foundation.mozilla.org",
      "logo" : "https://foundation.mozilla.org/_images/mozlogo.jpg"
    }
  </script>
{% endblock %}

{% block hero_guts %}
  {% include "./fragments/primary_heroguts.html" with root=root page=page homepage=True %}
{% endblock %}

{% block content %}
<div class="container">
  <div class="row mb-5 mt-0 mt-sm-5 d-flex align-items-center flex-sm-row-reverse homepage-feature">
    <div class="col-sm-6 mb-3 mb-sm-0">
      {% optimize_images page.hero_image %}
    </div>
    <div class="col-sm-6">
      <h1 class="h1-heading">{{ page.hero_headline }}</h1>
      <div class="body-large mb-4">{{ page.hero_story_description | richtext }}</div>
      <a class="btn btn-primary d-block d-sm-inline" href="{{page.hero_button_url}}">{{ page.hero_button_text }}</a>
    </div>
  </div>
  {% include "./fragments/areas_of_focus.html" %}

  {% include "./fragments/spotlight_posts.html" %}

  {% include "./fragments/news_you_can_use.html" %}

  <div class="row">
    <div class="col mb-4">
      <hr class="hr-emphasis mb-4">
      <h2 class="h4-heading">{% trans "Featured stories" %}</h2>
    </div>
  </div>
  <div id="home-highlights-wagtail">
    <div class="highlights mb-5">
      <div class="row pb-md-5 mb-md-2">
        {% for highlight in page.featured_highlights.all %}
        {% if forloop.counter <= 2 %}
        <div class="col-md-6 highlights-card">
          {% card highlight.highlight.image.url highlight.highlight.title highlight.highlight.description highlight.highlight.link_url highlight.highlight.link_label %}
        </div>
      {% endif %} {% endfor %}
      </div>
      {% for highlight in page.featured_highlights.all %} {% if forloop.counter > 2 %}
      <div class="row my-3">
        <div class="col-sm-12 col-md-4 pt-3 d-none d-md-block">
          {% homepage_image highlight.highlight.image %}
        </div>
        <div class="col-sm-12 col-md-8 pt-3">
          <hr class="mt-0 mb-4">
          <h4 class="h5-heading mb-3">
            <a href="{{highlight.highlight.link_url}}">{{highlight.highlight.title}}</a>
          </h4>
          <p>{{highlight.highlight.description}}</p>
        </div>
      </div>
      {% endif %} {% endfor %}
    </div>
  </div>
</div>

<div class="bg-light py-5">
  <div class="container">
    {% include "./fragments/news_you_can_use.html" %}
  </div>
</div>
<div class="container">
  {% include "./fragments/spotlight_posts.html" %}
  {# @TODO Confirm these are no longer required in the template. #}
  {% comment %} {% include "./fragments/featured_blogs.html" %} {% endcomment %}
  {% comment %} {% include "./fragments/featured_stories.html" %} {% endcomment %}
  {# END @TODO #}
</div>


<div class="bg-light py-5">
  <div class="container">
    {% include "./fragments/take_action.html" %}
  </div>
</div>

<div class="container">
  {% include "./fragments/quote.html" %}
</div>

{% include "./fragments/partner.html" %}

{% endblock %}
