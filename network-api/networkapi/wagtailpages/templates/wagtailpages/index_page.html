{% extends "./modular_page.html" %}

{% load wagtailcore_tags mini_site_tags %}


{% block content %}
  <div class="container">
    <div class="row">
      <div class="col-12 col-md-8 pt-4">
        <h1 class="h1-heading mb-0 mt-1 pt-2">
          {% if root.title %}{{ root.title }}{% elif page.header %}{{ page.header }}{% else %}{{ page.title }}{% endif %}
        </h1>
        <p class="body-large mt-3 mb-0">{{ page.intro }}</p>
      </div>
    </div>

    <div class="row">
      <div class="col-12">
        <hr class="intro-and-content-divider">
      </div>
    </div>

    <div class="row mb-4">
      {% if filtered %}  {# Start of IF for filtered page content. Note that this injects an entire row. #}
      <div class="col-12">
        <h3 class="h3-heading result-info">
          {% with count=entries|length %}
            {{ count }} page{% if count != 1 %}s{% endif %} for
          {% endwith %}
          <ul class="term-list">
          {% for term in terms %}
            <li class="term">{{ term }}</li>
          {% endfor %}
          </ul>
        </h3>
      </div>
    </div>

    <div class="row">
      {% endif %}  {# End of IF for filtered page content _after_ starting a new row. #}

      {% block subcontent %}
        {% for entry in entries %}
          {% with type=entry.specific_class.get_verbose_name|lower %}
            {% if type == "blog page" %}
              {% include "./fragments/blog-card.html" with page=entry %}
            {% else %}
              {% include "./fragments/generic-card.html" with page=entry %}
            {% endif %}
          {% endwith %}
        {% endfor %}

      {% endblock %}
    </div>
  </div>
{% endblock %}
