{% extends "./modular_page.html" %}

{% load wagtailcore_tags mini_site_tags %}

{% block body_id %}blog{% endblock %}

{% block subcontent %}
  <div class="offset-lg-1 col-lg-1 py-4 py-md-5 text-center">
    <div class="blog-sticky-side hidden-md-down"">
      <div class="share-button-group-wrapper" data-version="mini" data-layout="stacked" data-share-text="{{page.title}} by @mozilla" data-link="{{ request.scheme }}://{{ request.get_host }}{{ request.get_full_path }}"></div>
    </div>
  </div>
  <div class="py-4 py-md-5 col-lg-8">
    <div class="cms">
      <h1 class="h1-heading">{{ page.title }}</h1>
      <p class="h6-heading mb-5">
        By {{ page.author }} | {% if page.first_published_at %}{{ page.first_published_at|date:"F j, Y" }}{% else %}not
        published yet{% endif %}
        {% with category=page.specific.category.first %}
        {% if category %}
          | <a class="category" href="{% slugurl 'blog' %}category/{{category.slug}}">{{ category }}</a>
        {% endif %}
        {% endwith %}
      </p>
      <div class="blog-body">
        {{ page.body }}
        <div class="share-button-group-wrapper mt-5" data-share-text="{{page.title}} by @mozilla" data-link="{{ request.scheme }}://{{ request.get_host }}{{ request.get_full_path }}"></div>
      </div>
    </div>
      <div id="coral-talk-stream"></div>
    {% include "./fragments/post_tags.html" %}
  </div>
{% endblock %}

{% block prefooter %}
  {% include "./fragments/related_posts.html" %}
{% endblock %}

{% block extra_scripts %}
  <script src="{{ coralTalkServerUrl }}static/embed.js" async onload="
    Coral.Talk.render(document.getElementById('coral-talk-stream'), {
      talk: '{{ coralTalkServerUrl }}'
    });
  "></script>
{% endblock %}
